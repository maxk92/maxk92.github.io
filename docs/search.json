[
  {
    "objectID": "notebooks/ggplotTutorial.html",
    "href": "notebooks/ggplotTutorial.html",
    "title": "A ggplot2 Tutorial",
    "section": "",
    "text": "Before we can start into building plots with ggplot2, we have to load data to do so. To this end, we utilize the Rdshs package that was created specifically to provide data for this course. In case you haven’t used the package yet or you have to update it, uncomment and run the devtools::install_github() function in line 20 first. Once installed, you can omit this function from your notebook. Afterwards, load the package via the library() function at load the datasets you need into the namespace using data(). For the rest of this tutorial, we will need the fb.europe.xg1622, the fb.leicester.xg1516 and the fb.europe.players1718 dataframes.\n\n#devtools::install_github(\"spoho-datascience/Rdshs\")\nlibrary(tidyverse)\nlibrary(ggsoccer)\nlibrary(knitr)\nlibrary(Rdshs)\ndata(\"fb.europe.xg1622\")\ndata(\"fb.leicester.xg1516\")\ndata(\"fb.europe.players1718\")\n\n# make the position an ordered factor\nfb.europe.players1718 &lt;- fb.europe.players1718 %&gt;%\n  mutate(\n    foot = ifelse(foot == \"\", \"both\", foot),\n    position_wy = factor(position_wy, levels = c(\"Goalkeeper\", \"Defender\", \"Midfielder\", \"Forward\"), ordered = TRUE)\n  )\n\nmy_pitch_dimensions &lt;- list(\n  length = 105,\n  width = 68,\n  penalty_box_length = 16,\n  penalty_box_width = 39.32,\n  six_yard_box_length = 5,\n  six_yard_box_width = 17.32,\n  penalty_spot_distance = 11,\n  goal_width = 7.32,\n  origin_x = 0,\n  origin_y = 0\n)"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#grammar-of-graphics",
    "href": "notebooks/ggplotTutorial.html#grammar-of-graphics",
    "title": "A ggplot2 Tutorial",
    "section": "Grammar of Graphics",
    "text": "Grammar of Graphics\nWe quickly review the Grammar of\nGrammar of Graphics assumes that all plots are composed of:\n\nData you want to visualize and a set of aesthetic mappings describing how variables are mapped to aesthetic attributes (e.g. the value of a variable might be mapped to the position of a point on the coordinate system or to the color of the point)\nLayers made up of geometric elements and statistical transformation (a layer can be a set of points showing the raw data, another layer can be a regression line on the data, which refers to a statistical transformation)\nScales map values in data space to values in aesthetics space, such as color, size, shape (e.g. a categorical variable is mapped to a set of different points shapes or a continuous variable is mapped to a color scale)\nCoordinate System describes how data coordinates are mapped to plane of graphic; normally Cartesian Coordinate System is used, but others are available\nFaceting specification describes breaking up data into subsets and displaying those subsets\nTheme controls appearance of the plot, like font size, background color etc.\n\n\nfb.europe.players1718 %&gt;%\n  filter(position_wy != \"Goalkeeper\",\n         !is.na(marketval)) %&gt;%\n  ggplot(aes(x=passes, y=totxa)) +\n  geom_point(aes(fill=marketval), shape = 21, size = 2, alpha = .8) +\n  facet_wrap(~position_wy) +\n  geom_label(data = filter(fb.europe.players1718, marketval &gt; 100000000), aes(label = player_name), size = 2, nudge_y = 1, nudge_x = -200) +\n  scale_fill_gradient(low = \"white\", high = \"red\", labels = scales::label_number()) +\n  theme_dark()"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#basic-ggplot2-structure",
    "href": "notebooks/ggplotTutorial.html#basic-ggplot2-structure",
    "title": "A ggplot2 Tutorial",
    "section": "Basic ggplot2 structure",
    "text": "Basic ggplot2 structure\nExample plot using fb.leicester.xg1516:\n\nggplot(fb.leicester.xg1516, aes(x=shot_x, y=shot_y)) +\ngeom_point()"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#using-pipes-instead-of-the-data-argument",
    "href": "notebooks/ggplotTutorial.html#using-pipes-instead-of-the-data-argument",
    "title": "A ggplot2 Tutorial",
    "section": "Using pipes instead of the data argument",
    "text": "Using pipes instead of the data argument\n\nthe data argument to the ggplot function indicates the dataset to be used\ninstead of calling ggplot and providing the dataset as the first argument, you can also call the dataset first and then use the pipe operator %&gt;% to pass the data to a ggplot function\nthis is especially useful, if transformations shall be applied to data before creating the plot, such as mutate and filter\nboth code snippets render the same plot:\n\n\nggplot(fb.leicester.xg1516, aes(x=shot_x, y=shot_y)) +\ngeom_point()\n\n\n\n\n\n\n\nfb.leicester.xg1516 %&gt;% ggplot(aes(x=shot_x, y=shot_y)) +\ngeom_point()\n\n\n\n\n\n\n\n\n:::"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#scatterplot",
    "href": "notebooks/ggplotTutorial.html#scatterplot",
    "title": "A ggplot2 Tutorial",
    "section": "Scatterplot",
    "text": "Scatterplot\n\naesthetics defined within ggplot object will be used in every subsequent geom if not overridden\naesthetics defined within a geom object will be used only for that geom\nboth code snippets render the same plot\n\n\nfb.europe.players1718 %&gt;%\n  ggplot(aes(x=totxg, y = totxa)) +\n  geom_point()\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_point(aes(x=totxg, y = totxa))"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#scatterplot---color-mapping",
    "href": "notebooks/ggplotTutorial.html#scatterplot---color-mapping",
    "title": "A ggplot2 Tutorial",
    "section": "Scatterplot - color mapping",
    "text": "Scatterplot - color mapping\n\nthe col aesthetic maps a variable to the color of the points\nin this example, point color indicates player positions\nalso possible to map a continuous variable\n\n\nfb.europe.players1718 %&gt;%\n  ggplot(aes(x=totxg, y = totxa)) +\n  geom_point(aes(col = position_wy))"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#scatterplot---size-mapping",
    "href": "notebooks/ggplotTutorial.html#scatterplot---size-mapping",
    "title": "A ggplot2 Tutorial",
    "section": "Scatterplot - size mapping",
    "text": "Scatterplot - size mapping\n\nthe size aesthetic maps a variable to the size of the points\nin this example, point size indicates player market value\nalso possible to map a discrete variable\n\n\nfb.europe.players1718 %&gt;%\n  ggplot(aes(x=totxg, y = totxa)) +\n  geom_point(aes(col = position_wy, size = marketval))"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#scatterplot---shape-mapping",
    "href": "notebooks/ggplotTutorial.html#scatterplot---shape-mapping",
    "title": "A ggplot2 Tutorial",
    "section": "Scatterplot - shape mapping",
    "text": "Scatterplot - shape mapping\n\nthe shape aesthetic maps a variable to the shape of the points\nin this example, point shape indicates the league the players are competing in\nmapping a continuous variable to shape aesthetic is not possible\n\n\nfb.europe.players1718 %&gt;%\n  ggplot(aes(x=totxg, y = totxa)) +\n  geom_point(aes(col = position_wy, size = marketval, shape = competition))"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#scatterplot---alpha-mapping",
    "href": "notebooks/ggplotTutorial.html#scatterplot---alpha-mapping",
    "title": "A ggplot2 Tutorial",
    "section": "Scatterplot - alpha mapping",
    "text": "Scatterplot - alpha mapping\n\nthe alpha aesthetic maps a variable to the transparency of the points\nnow, the market value is mapped to point transparency instead of point size\nmapping a continuous variable to alpha aesthetic is technically possible, but not useful\n\n\nfb.europe.players1718 %&gt;%\n  ggplot(aes(x=totxg, y = totxa)) +\n  geom_point(aes(col = position_wy, alpha = marketval))"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#mapping-vs.-setting",
    "href": "notebooks/ggplotTutorial.html#mapping-vs.-setting",
    "title": "A ggplot2 Tutorial",
    "section": "Mapping vs. setting",
    "text": "Mapping vs. setting\n\nso far, we performed mapping of different aesthetics to variables\ne.g. we mapped the position of the players to the color aesthetic of the points or the market value to the size aesthetic\nalso, xG and xA values were mapped tox and y aesthetics\n\nInstead of mapping aesthetics to variables, it is also possible to set them to constant values\nAesthetics that are commonly used in ggplot are\n\ncolor\nsize\nshape\nfill\nalpha\n…\n\nDifferent geoms accept different aesthetics\n\nif we just want to modify the appearance of a geom (color, size, shape) without including information in it, we can just set the respective aesthetic refer back to grammar, aesthetic mappings\nin ggplot2, the difference between mapping and setting is made by either defining the respective aesthetic within the aes() function or outside of it\nif an aesthetic is defined within aes(), it is mapped to a variable, if it is defined outside of aes(), it is set to a value"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#mapping-vs.-setting-1",
    "href": "notebooks/ggplotTutorial.html#mapping-vs.-setting-1",
    "title": "A ggplot2 Tutorial",
    "section": "Mapping vs. setting",
    "text": "Mapping vs. setting\n\nMapping\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_point(aes(x = totxg, y = totxa, col = position_wy))\n\n\n\n\n\n\n\n\n\n\nSetting\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_point(aes(x = totxg, y = totxa), col = \"red\")"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#mapping-vs.-setting-with-geom_point",
    "href": "notebooks/ggplotTutorial.html#mapping-vs.-setting-with-geom_point",
    "title": "A ggplot2 Tutorial",
    "section": "Mapping vs. setting with geom_point",
    "text": "Mapping vs. setting with geom_point\n\nColor\n\nif col is specified outside aes(), a fixed color can be defined for the respective geom\nto call a color, different methods are available:\n\nthe name, e.g. col = \"red\"; all 657 color names can be accessed by colors()\nusing rgb(), manually specifying intensites of red, green, and blue, e.g. col = rgb(1, 0, 0)\ndirectly specifying the hexadecimal code, e.g. col = #FF0000\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_point(aes(x=totxg, y = totxa), col = \"#FF0000\")\n\n\n\n\n\n\n\n\n\n\nShape and Fill\n\nby specifying shape outside of aes(), a desired shape can be chosen for points\nshapes are specified using their respective number or name:\ndepending on the chosen shape, col either defines the color of the whole point or only the border color\ne.g. shape 21 allows to define different colors for border and area of the geom - in this case, fill aesthetic is used for the main area\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_point(aes(x=totxg, y = totxa), shape = 25, col = \"black\", fill = \"red\")\n\n\n\n\n\n\n\n\n\n\nSize and stroke\n\nsize accepts a numeric value, specifying the size of a point in mm\nfor shapes that allow separate specification of col and fill, the size of the filled part is controlled by size and the border linewidth is controlled by stroke\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_point(aes(x=totxg, y = totxa), shape = 25, col = \"black\", fill = \"red\", size = 3, stroke = 2)\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_point(aes(x=totxg, y = totxa), shape = 25, col = \"black\", fill = \"red\", size = 3, stroke = .5)\n\n\n\n\n\n\n\n\n\n\nTransparency\n\nalpha accepts a numeric value, but only values in \\([0,1]\\) affect the appearance\nif alpha is specified as a fraction with numerator 1, the denominator indicates how many points have to be plotted on top of each other for solid shape\ni.e., if alpha is set to \\(\\frac{1}{5}\\) or alpha = 0.2, five points overlapping result in a solid appearance\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_point(aes(x=totxg, y = totxa), alpha = .2)"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#other-geoms",
    "href": "notebooks/ggplotTutorial.html#other-geoms",
    "title": "A ggplot2 Tutorial",
    "section": "Other geoms",
    "text": "Other geoms\n\nin the previous code snippets, geom_point() could be replaced by any other geometric object\nhowever, different geoms accept different aesthetics (while a lot of them are common to most geoms)\ncommon geoms and the respective plots they are used for are:\n\n\n\n\ngeom\nPlot\n\n\n\n\ngeom_line()\nLine plot\n\n\ngeom_boxplot()\nBox plot\n\n\ngeom_bar()\nBar plot\n\n\ngeom_col()\nBar plot\n\n\ngeom_histogram()\nHistogram\n\n\ngeom_freqpoly()\nDensity plot\n\n\ngeom_smooth()\n(Nonlinear) regression line\n\n\n…\n…"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#geom_line",
    "href": "notebooks/ggplotTutorial.html#geom_line",
    "title": "A ggplot2 Tutorial",
    "section": "geom_line",
    "text": "geom_line\n\ngeom_line() mostly used for time series data\ne.g. evolution of cumulated xG values for one team during a season\ngeom_path() is an alternative where lines are not restrained to go left to right\n\n\nfb.leicester.xg1516 %&gt;%\n  group_by(match_id) %&gt;%\n  summarise(date = first(date),\n            xG = sum(xG)) %&gt;%\n  ungroup() %&gt;%\n  mutate(cum_xG = cumsum(xG),\n         date = as.Date(date)) %&gt;%\n  ggplot() +\n  geom_line(aes(x=match_id, y=cum_xG))\n\n\n\n\n\n\n\n\n\nLinetype\n\nlinetype can be specified with name or number: 0 = blank, 1 = solid, 2 = dashed, 3 = dotted, 4 = dotdash, 5 = longdash, 6 = twodash:\nyou can also customize the length of on/off stretches of a line using 2, 4, 6 or 8 hexadecimal digits\n\n\np_line &lt;- fb.leicester.xg1516 %&gt;%\n  group_by(match_id) %&gt;%\n  summarise(date = first(date),\n            xG = sum(xG)) %&gt;%\n  ungroup() %&gt;%\n  mutate(cum_xG = cumsum(xG),\n         date = as.Date(date)) %&gt;%\n  ggplot() +\n  theme(title = element_text(size = 20), axis.title.x = element_text(size = 14), axis.title.y = element_text(size = 14))\n\np_line + geom_line(aes(x=match_id, y=cum_xG), linetype = 'dashed') +\n  ggtitle(\"linetype = 'dashed'\")\n\n\n\n\n\n\n\np_line + geom_line(aes(x=match_id, y=cum_xG), linetype = 'dotted')+\n  ggtitle(\"linetype = 'dotted'\")\n\n\n\n\n\n\n\np_line + geom_line(aes(x=match_id, y=cum_xG), linetype = '8f1f')+\n  ggtitle(\"linetype = '8f1f'\")\n\n\n\n\n\n\n\n\n\n\nColor and linewidth\n\ncol is specified in the same way as for geom_point()\nlinewidth determines the width of lines\ndue to historical error, unit of linewidth is roughly 0.75 mm\nusing size for linewidth currently still works but is deprecated and is not recommended\nlineend and linejoin are further aesthetics\n\n\np_line + geom_line(aes(x=match_id, y=cum_xG), linetype = 'dashed', col = \"red\") +\n  ggtitle(\"linetype = 'dashed' and col = 'red'\")\n\n\n\n\n\n\n\np_line + geom_line(aes(x=match_id, y=cum_xG), linewidth = 2)+\n  ggtitle(\"linewidth = 2\")"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#geom_bar",
    "href": "notebooks/ggplotTutorial.html#geom_bar",
    "title": "A ggplot2 Tutorial",
    "section": "geom_bar",
    "text": "geom_bar\n\ngeom_bar() creates a bar plot\nper default, it accepts only an x or y aesthetic and calculates the number of observations per group for the other one\ndepending on which aesthetic is specified, the bars appear horizontal or vertical\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_bar(aes(x=position_wy)) \n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_bar(aes(y=position_wy)) \n\n\n\n\n\n\n\n\n\nfor changing the color of the bars, geom_bar() accepts col for its border and fill for the bar area\nspecifying linetype changes the appearance of the lines around the bars and size changes their thickness\nwidth modifies bar width\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_bar(aes(x=position_wy), fill = \"blue\", col = \"red\") \n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_bar(aes(y=position_wy), fill = \"white\", col = \"red\", size = 3) \n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_bar(aes(x=position_wy), fill = \"white\", col = \"black\", linetype = \"dashed\") \n\n\n\n\n\n\n\n\n\ngeom_bar vs. geom_col\n\nthe reason geom_bar() accepts only one position aesthetic and displays number of occurrence on the other is that it includes stat = \"count\" per default\nif the height of the bar shall indicate a numeric value, one can add a second position aesthetic and specify stat = \"identity\"\nusing geom_col() instead of geom_bar() also leads to this behavior\nhowever, bar plots should only be used to indicate counts and proportions, not continuous variables\n\n\nfb.europe.players1718 %&gt;%\n  group_by(position_wy) %&gt;%\n  summarise(\n    mean_no_shots = mean(n_shots)\n  ) %&gt;%\n  ggplot() +\n  geom_bar(aes(x=position_wy, y=mean_no_shots), stat = \"identity\") \n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  group_by(position_wy) %&gt;%\n  summarise(\n    mean_no_shots = mean(n_shots)\n  ) %&gt;%\n  ggplot() +\n  geom_col(aes(x=position_wy, y=mean_no_shots))"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#groups-in-geom_bar",
    "href": "notebooks/ggplotTutorial.html#groups-in-geom_bar",
    "title": "A ggplot2 Tutorial",
    "section": "Groups in geom_bar",
    "text": "Groups in geom_bar\n\nsometimes, the relationship between two discrete variables shall be expressed by comparing distributions of one variable between groups of the other variable\ne.g., we could be interested in the distribution of playing positions per competition\nthis can be achieved by using grouped bar plots\nto create a grouped bar plot we have to specify the col or fill argument to geom_bar()\nthe relative positioning of the bars within one factor level can be varied; it defaults to position = \"stack\" which stacks the absolute counts on top of each other\nif we are interested in discrete distributions across factor levels, we might want to look at relative proportions\nthis can be achieved by specifying position = \"fill\"\nas an alternative, the bars can be placed as a group next to each other with position = \"dodge\"\n\n\nfb.europe.players1718 %&gt;%\n  mutate(competition = gsub(\" first division\", \"\", competition)) %&gt;%\n  ggplot() +\n  geom_bar(aes(x=competition, fill = position_wy))\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  mutate(competition = gsub(\" first division\", \"\", competition)) %&gt;%\n  ggplot() +\n  geom_bar(aes(x=competition, fill = position_wy), position = \"stack\")\n\n\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  mutate(competition = gsub(\" first division\", \"\", competition)) %&gt;%\n  ggplot() +\n  geom_bar(aes(x=competition, fill = position_wy))\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  mutate(competition = gsub(\" first division\", \"\", competition)) %&gt;%\n  ggplot() +\n  geom_bar(aes(x=competition, fill = position_wy), position = \"stack\")\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  mutate(competition = gsub(\" first division\", \"\", competition)) %&gt;%\n  ggplot() +\n  geom_bar(aes(x=competition, fill = position_wy), position = \"fill\")\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  mutate(competition = gsub(\" first division\", \"\", competition)) %&gt;%\n  ggplot() +\n  geom_bar(aes(x=competition, fill = position_wy), position = \"dodge\")"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#geom_histogram",
    "href": "notebooks/ggplotTutorial.html#geom_histogram",
    "title": "A ggplot2 Tutorial",
    "section": "geom_histogram",
    "text": "geom_histogram\n\nif we want to visualize the distribution of a continuous variable, a histogram is the plot of choice\nwe can create histograms by passing the continuous variable to the x (or y) aesthetic and calling geom_histogram()\nvery important to specify bins or binwidth parameter according to the use case (default bins = 30)\nchoosing a different col than default might help in disentangling bins\n\n\nfb.europe.players1718 %&gt;% \n  ggplot(aes(x=pass_mean_pos_x)) + \n  geom_histogram()\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;% \n  ggplot(aes(x=pass_mean_pos_x)) + \n  geom_histogram(col = \"black\")\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;% \n  ggplot(aes(x=pass_mean_pos_x)) + \n  geom_histogram(col = \"black\", binwidth = 1)\n\n\n\n\n\n\n\n\n\nComparing distributions with geom_histogram and geom_freqpoly\n\njust like with other geoms, geom_histogram() accepts variables for the fill parameter to visualize groups\nif distributions overlap too strongly, geom_freqpoly() might be a better choice (however, here col specifies groups)\n\n\nfb.europe.players1718 %&gt;% \n  ggplot() + \n  geom_histogram(aes(x=pass_mean_pos_x, fill = position_wy), col = 'black', binwidth = 1)\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;% \n  ggplot() + \n  geom_freqpoly(aes(x=pass_mean_pos_x, col = position_wy), binwidth = 1)"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#geom_boxplot",
    "href": "notebooks/ggplotTutorial.html#geom_boxplot",
    "title": "A ggplot2 Tutorial",
    "section": "geom_boxplot",
    "text": "geom_boxplot\n\nanother great option to visualize distributions and especially compare them in a space-efficient manner are box plots\na univariate box plot is called using geom_boxplot() and specifying either x or y aesthetic\nif a discrete variable is given for the other position aesthetic, box plots are created per group\nif we want to add another variable, we can do so by specifying col or fill aesthetics as well\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_boxplot(aes(y = pass_mean_pos_x))\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_boxplot(aes(x = position_wy, y = pass_mean_pos_x))\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_boxplot(aes(x = position_wy, y = pass_mean_pos_x, fill = foot))\n\n\n\n\n\n\n\n\n\nVariable width and notches\n\nbox plots per default display five statistics of a distribution\nMcGill and colleagues introduced two powerful extension to the box plot:\n\nindicating sample size per group by means of variable box widths\nindicating robustness of the median estimate by means of notches\n\nspecifying var_width = TRUE and notch = TRUE activates these behaviors respectively\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_boxplot(aes(x = position_wy, y = pass_mean_pos_x, fill = foot), varwidth = TRUE) +\n  ggtitle(\"var.width = TRUE\")\n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot() +\n  geom_boxplot(aes(x = position_wy, y = pass_mean_pos_x, fill = foot), notch = TRUE) +\n  ggtitle(\"notch = TRUE\")\n\n\n\n\n\n\n\n\n\n\nCombination with scatter plots\n\nbox plots generally allow to add the raw data to the plot, which might give even more transparency to the storytelling\na layer of geom_point() might be added to the plot\nhowever, introducing some horizontal jitter will help to disentangle observations\nthis works well only for smaller datasets\n\n\nfb.europe.players1718 %&gt;%\n  ggplot(aes(x=position_wy, y=pass_mean_pos_x)) +\n  geom_boxplot() +\n  geom_point() \n\n\n\n\n\n\n\nfb.europe.players1718 %&gt;%\n  ggplot(aes(x=position_wy, y=pass_mean_pos_x)) +\n  geom_boxplot() +\n  geom_jitter()"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#grammar-of-graphics---recap",
    "href": "notebooks/ggplotTutorial.html#grammar-of-graphics---recap",
    "title": "A ggplot2 Tutorial",
    "section": "Grammar of Graphics - Recap",
    "text": "Grammar of Graphics - Recap\n\n\n\nComponent\nggplot2\n\n\n\n\nData\ndata argument\n\n\nAesthetic Mappings\nmappings argument (specified in aes())\n\n\nLayers\nmostly geoms (other layers possible)\n\n\nScales\nscale_*() layers\n\n\nCoordinate System\ncoord_*() layer\n\n\nFaceting\nfacet_wrap() or facet_grid() layer\n\n\nTheme\ntheme() layer"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#building-a-plot-layer-by-layer",
    "href": "notebooks/ggplotTutorial.html#building-a-plot-layer-by-layer",
    "title": "A ggplot2 Tutorial",
    "section": "Building a plot layer by layer",
    "text": "Building a plot layer by layer\nTarget plot:\n\nfb.leicester.xg1516 %&gt;%\n  ggplot(aes(x=shot_x, y=shot_y)) +\n  geom_point(aes(col=outcome)) +\n  coord_fixed(ratio = 1, xlim = c(0,105), ylim = c(0,68)) +\n  scale_color_discrete(type = c(\"grey\", \"red\")) +\n  facet_wrap(~lastAction) +\n  theme_dark()\n\n\n\n\n\n\n\n\n\nScales\n\nscales are an important concept in ggplot2 and the grammar of graphics\nthey control the mapping of data to aesthetics\ne.g., in the following code, we specified an x, y, and col aesthetic\nthe x position scale tells ggplot how to translate the variable shot_x to a position on the x axis\nthe y position scale tells ggplot how to translate the variable shot_y to a position on the y axis\nthe colour scale tells ggplot how to color points according to the levels of outcome\nscales also define the guides, i.e. axes and legends\n\nWe map the x- and y-coordinates of shots to the x- and y-aesthetic of the plot. Then, we map a variable (outcome) to the color aesthetic. If we are not specifying any scales, we are using the default scales. For x- and y-aesthetics, this is a cartesian coordinate system. For color, it is the default color scale used in ggplot2:\n\nfb.leicester.xg1516 %&gt;%\n  ggplot(aes(x = shot_x, y = shot_y, col = outcome)) +\n  geom_point()\n\n\n\n\n\n\n\n\n\nthe mapping of x and y aesthetic is straightforward in a cartesian coordinate system (however, transformations like log-transform might be applied)\nscales also apply to all other aesthetics, such as size, shape, alpha\noften, the default options for scales are sufficient and do not have to be tweaked\nscales can be added as layers and ggplot and always take the form scale_A_B, where A refers to the aesthetic the scale is mapping and B refers to some kind of specification like discrete or continuous\nwithin the scale layer, the mapping can be controlled (by for example choosing custom colors for the color mapping)\nin order to change the discrete coloring of the points, we can use the scale_color_discrete() function:\n\n\nfb.leicester.xg1516 %&gt;%\n  ggplot(aes(x = shot_x, y = shot_y, col = outcome)) +\n  geom_point() +\n  scale_color_discrete(type = c(\"grey\", \"red\"))\n\n\n\n\n\n\n\n\n\n\nCoordinate System\nCoordinate systems have two main jobs in ggplot2:\n\nCombine the two position aesthetics to produce a 2d position on the plot\n\nposition aesthetics are called x and y but calling them position 1 and 2 is more general\nfor example, with the polar coordinate system they become angle and radius and with maps they become latitude and longitude\n\nIn coordination with the faceter, coordinate systems draw axes and panel backgrounds\n\nwhile scales control the values that appear on the axes and mapping from data to position, the coordinate system actually draws them\nthis is because their appearance depends on the coordinate system\n\n\nThree types of linear coordinate systems:\n\ncoord_cartesian() allows zooming in or out by controlling xlim and ylim\ncoord_flip() exchanges x and y axes\ncoord_fixed() fixes the ratio of the length on x and y axis with the ratio parameter (default 1)\n\n\np &lt;- fb.leicester.xg1516 %&gt;%\n  ggplot(aes(x = shot_x, y = shot_y, col = outcome)) +\n  geom_point() +\n  scale_color_discrete(type = c(\"grey\", \"red\"))\n\np + coord_cartesian(xlim = c(0, 105), ylim = c(0,68))\n\n\n\n\n\n\n\np + coord_flip(xlim = c(0, 105), ylim = c(0,68))\n\n\n\n\n\n\n\np + coord_fixed(xlim = c(0, 105), ylim = c(0,68), ratio = 1)\n\n\n\n\n\n\n\n\n\n\nFaceting\n\nusing faceting, we can subset a plot based on discrete variables and display the subsets in distinct plots\nthree types of faceting:\n\nfacet_null(): a single plot, the default\nfacet_wrap(): “wraps” a 1d ribbon of panels into 2d\nfacet_grid(): produces a 2d grid of panels defined by variables which form the rows and columns\n\n\n\nfb.leicester.xg1516 %&gt;%\n  ggplot(aes(x = shot_x, y = shot_y, col = outcome)) +\n  geom_point() +\n  scale_color_discrete(type = c(\"grey\", \"red\")) +\n  coord_fixed(xlim = c(0,105), ylim= c(0,68)) +\n  facet_wrap(~lastAction)\n\n\n\n\n\n\n\n\n\nusing facet_wrap(), specifying ncol controls the number of columns to wrap the panels into\nusing facet_grid(), if only one variable shall be used, “.” replaces the other one\n\n\np &lt;- fb.leicester.xg1516 %&gt;%\n  ggplot(aes(x = shot_x, y = shot_y, col = outcome)) +\n  geom_point() +\n  scale_color_discrete(type = c(\"grey\", \"red\")) +\n  coord_fixed(xlim = c(0,105), ylim= c(0,68))\n\np + facet_wrap(~shotType, ncol = 2)\n\n\n\n\n\n\n\np + facet_grid(shotType~.)\n\n\n\n\n\n\n\np + facet_grid(.~shotType)\n\n\n\n\n\n\n\n\n\n\nTheme\n\ntheming system allows specification of all non-data elements\nallows specification of all theme elements, like fonts, backgrounds, colors\ncustomizing the theme yourself can get complex\nthere are some complete themes, like theme_grey() (the default), which set all of the theme elements to values designed to work together harmoniously\n\n\n\nbuilt-in themes in ggplot2:\n\ntheme_bw(): a variation on theme_grey() that uses a white background and thin grey grid lines.\ntheme_linedraw(): a theme with only black lines of various widths on white backgrounds, reminiscent of a line drawing.\ntheme_light() : similar to theme_linedraw() but with light grey lines and axes, to direct more attention towards the data.\ntheme_dark(): the dark cousin of theme_light(), with similar line sizes but a dark background. Useful to make thin coloured lines pop out.\ntheme_minimal(): a minimalistic theme with no background annotations.\ntheme_classic(): a classic-looking theme, with x and y axis lines and no gridlines.\ntheme_void(): a completely empty theme.\n\n\np &lt;- fb.leicester.xg1516 %&gt;%\n  ggplot(aes(x=shot_x, y=shot_y)) +\n  geom_point(aes(col=outcome)) +\n  coord_fixed(xlim = c(0,105), ylim = c(0,68)) +\n  scale_color_discrete(type = c(\"grey\", \"red\")) +\n  facet_wrap(~lastAction)\n\np + theme_dark()\n\n\n\n\n\n\n\np + theme_bw()\n\n\n\n\n\n\n\np + theme_minimal()\n\n\n\n\n\n\n\n\n\n\nBuilding the final plot:\n\nwe first map the x- and y-coordinates of each shot to the position aesthetics\nwe add a geom_point()-layer, where the outcome of shots is mapped to the color of the points\nwe add a scale_color_discrete()-layer to override the default color scale and define the two colors for our two factor levels\nwe add coord_fixed() for a cartesian coordinate system that has a fixed aspect ratio (so that 1m in pitch length corresponds to 1m in pitch width); we also define limits for the coordinate systems that are wider then the range of the data, in order to create a realistic display of a football pitch\nwe add a facet_wrap() in order to separate plots by the last action performed before the shot\nlastly, we add a theme_dark() for a dark theming\n\n\nfb.leicester.xg1516 %&gt;%\n  ggplot(aes(x=shot_x, y=shot_y)) +\n  geom_point(aes(col=outcome)) +\n  scale_color_discrete(type = c(\"grey\", \"red\")) +\n  coord_fixed(ratio = 1, xlim = c(0,105), ylim = c(0,68)) +\n  facet_wrap(~lastAction) +\n  theme_dark()\n\n\n\n\n\n\n\n\nThe beauty and flexibility in ggplot now comes from the fact that we could alter each layer in a way that will change the appearance of the plot, without having to rebuild the whole visualization. Try out to change the theme or the coloring of the plots, or create a different faceting for a different factor."
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#exporting-plots",
    "href": "notebooks/ggplotTutorial.html#exporting-plots",
    "title": "A ggplot2 Tutorial",
    "section": "Exporting plots",
    "text": "Exporting plots\nWays to export ggplot plots:\n\neither just run the code to display the plot, or save it by assigning it to a variable: p &lt;- ggplot(dat, aes(x,y)) + geom_point()\nrender it on screen with p or, inside loop/function, with print(p)\nrender it to documents within notebooks using Markdown/quarto\nsave to disk with ggsave(p, \"plot.png\", width = 5, height = 5)\nsave a cached copy of the plot to disk: saveRDS(p, \"plot.rds\") and read it back in with p &lt;- readRDS(\"plot.rds\")"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#backlog",
    "href": "notebooks/ggplotTutorial.html#backlog",
    "title": "A ggplot2 Tutorial",
    "section": "Backlog",
    "text": "Backlog"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#individual-and-collective-geoms",
    "href": "notebooks/ggplotTutorial.html#individual-and-collective-geoms",
    "title": "A ggplot2 Tutorial",
    "section": "36 Individual and collective geoms",
    "text": "36 Individual and collective geoms\n\nplot mean passing positions\nplot transparent polygon per player / per player position\n\n\nfb.europe.players1718 %&gt;% \nggplot(aes(x=pass_mean_pos_x, y=pass_mean_pos_y)) + \nannotate_pitch(dimensions = my_pitch_dimensions, colour = \"white\", fill = \"lightblue\") + \ntheme_classic() + \ntheme(panel.background = element_rect(fill = \"lightblue\")) + \ngeom_polygon(aes(group = position_wy, fill = position_wy), alpha = 0.5) + \ngeom_point(aes(col=position_wy), fill = \"white\", stroke = .5, shape = 21, size=.5) #+ \n\n\n\n\n\n\n\nfacet_wrap(~position_wy)\n\n&lt;ggproto object: Class FacetWrap, Facet, gg&gt;\n    compute_layout: function\n    draw_back: function\n    draw_front: function\n    draw_labels: function\n    draw_panels: function\n    finish_data: function\n    init_scales: function\n    map_data: function\n    params: list\n    setup_data: function\n    setup_params: function\n    shrink: TRUE\n    train_scales: function\n    vars: function\n    super:  &lt;ggproto object: Class FacetWrap, Facet, gg&gt;"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#building-a-shot-map-layer-by-layer",
    "href": "notebooks/ggplotTutorial.html#building-a-shot-map-layer-by-layer",
    "title": "A ggplot2 Tutorial",
    "section": "39 Building a shot map layer by layer",
    "text": "39 Building a shot map layer by layer\n\nCoordinate system\npitch annotation\nadding raw shot locations\n\noverplotting: reduce size, transparency, density estimation\n\nadding outcome as color coding\nadding xG value as size\nmaybe add shotType as polygon\nannotate goals from high distance"
  },
  {
    "objectID": "notebooks/ggplotTutorial.html#layer-by-layer-shot-map",
    "href": "notebooks/ggplotTutorial.html#layer-by-layer-shot-map",
    "title": "A ggplot2 Tutorial",
    "section": "40 Layer by layer: shot map",
    "text": "40 Layer by layer: shot map\n\ndf_high &lt;- fb.europe.xg1622 %&gt;%\n  filter(season == 2021, team == \"Liverpool\", shot_x &lt; 70)\n\nfb.europe.xg1622 %&gt;%\n  filter(season == 2021, team == \"Liverpool\") %&gt;%\n  ggplot(aes(x = shot_x, y = shot_y)) + \n  annotate_pitch(dimensions = my_pitch_dimensions, colour = \"white\",fill = \"#3ab54a\") +\n  coord_cartesian(xlim = c(0, 105)) + \n  theme_classic() + \n  theme(panel.background = element_rect(fill = \"#3ab54a\")) + \n  geom_point(aes(size = xG, fill = outcome), col = 'black', shape = 21) + \n  geom_text(data = df_high, aes(label = player), col = \"black\", size = 3, vjust = -2) + \n  #geom_vline(xintercept = c(0, 35, 70, 105), col = \"red\", linetype = \"dashed\") + \n  scale_x_continuous(breaks = seq(0,105, 35), labels = c(\"Goal Line\", \"First Third\", \"Second Third\", \"Final Third\"))\n\n\n\n\n\n\n\n\n\nfb.europe.xg1622_evolution &lt;- fb.europe.xg1622 %&gt;% \n  mutate( team = ifelse(h_a == \"h\", as.character(home_team), as.character(away_team)) ) %&gt;% \n  select(match_id, season, league, team, home_team, away_team, h_a, xG, date) %&gt;% \n  group_by(match_id) %&gt;% \n  summarise( league = first(league), team = first(team), date = first(date), season = first(season), xG = sum(xG) ) %&gt;% \n  ungroup() %&gt;% \n  group_by(season, team) %&gt;% \n  mutate( time = date, date = as.Date(date), cum_xg = cumsum(xG) )\n\nfb.europe.xg1622_evolution %&gt;%\n  filter(season == 2021, league == \"Bundesliga\") %&gt;%\n  ggplot(aes(x=date, y = cum_xg)) + \n  #geom_point() geom_line(aes(col = team)) + \n  geom_point(size = .51) + \n  scale_x_date(date_breaks = \"1 month\", date_minor_breaks = \"1 week\", date_labels = \"%b-%y\") + \n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\n\n\n\n\n\np_bvb &lt;- fb.europe.xg1622 %&gt;%\n  filter(home_team == \"Borussia Dortmund\", h_a == \"h\", season == 2021) %&gt;% \n  ggplot(aes(x= player, y = xG)) + \n  geom_jitter()\n\np_bvb + \n  guides(x = guide_axis(angle = 90))\n\n\n\n\n\n\n\np_bvb + \n  guides(x = guide_axis(n.dodge = 4))"
  },
  {
    "objectID": "notebooks/clusterGoals.html",
    "href": "notebooks/clusterGoals.html",
    "title": "Clustering Goals in the German Bundesliga",
    "section": "",
    "text": "library(tidyverse)\nlibrary(flexclust)\noptions(scipen=999)\n\npath &lt;- '/home/max/drive/dshs/teaching/abschlussarbeiten/Herrmann_Sven/data/Rohdaten.csv'\n\ndat &lt;- read.csv(path)\n\ncolnames(dat) &lt;- c(\"mday\", \"goalid\", \"home\", \"away\", \"team\", \"home_score\", \"away_score\", \"interval\", \"tactical_context\", \"passes_before_goal\", \"previous_action\",\n                   \"action_leading2goal\", \"pressure\", \"preassist\", \"assist\", \"scorer\", \"zone_preassist\", \"zone_assist\", \"zone_goal\")\n\ndf_cluster &lt;- dat %&gt;%\n  select(home, away, team, tactical_context, passes_before_goal, previous_action, action_leading2goal, pressure, zone_preassist, zone_assist, zone_goal) %&gt;%\n  mutate_all(as.factor) %&gt;%\n  mutate(\n    tactical_context = factor(tactical_context, levels = c(\"Freistoß (direkt)\", \"Eckstoß (outswing)\", \"Aus dem Spiel\", \"Umschaltspiel nach Ballgewinn\",  \"Eckstoß (kurz)\", \"Eckstoß (inswing)\", \"Freistoß (indirekt)\", \"Einwurf\", \"Strafstoß\", \"\"), labels = c(\"directFreekick\", \"outswingCornerkick\", \"openPlay\", \"counterAttack\", \"shortCornerkick\", \"inswingCornerkick\", \"indirectFreekick\", \"throwin\", \"penalty\", \"counterAttack\")\n                              ),\n    action_leading2goal = factor(action_leading2goal, levels = c(\"Ballkontrolle + Dribbling + Schuss\", \"Ballkontrolle + Schuss\", \"Schuss (direkt)\", \"Kopfball\"), labels = c(\"dribbleAndShot\", \"receptionAndShot\", \"directShot\", \"header\")\n                                 ),\n    pressure = factor(pressure, levels = c(\"No-Pressure\", \"Pressure\"), labels = c(\"noPressure\", \"pressure\")),\n    previous_action = factor(previous_action, levels = c(\"Pass &lt; (10m)\", \"Shot\", \"Cross\", \"Pass (10 - 20m)\", \"n.a\", \"Kopf\"), labels = c(\"shortPass\", \"shot\", \"cross\", \"longPass\", \"none\", \"header\"))\n    )\nFootball teams adopt different strategies. The way in which they create their goal opportunities generates a footprint of their playing style. Identifying an opponent’s playing style can help to prepare for a match against that team. Since goals can be described by a multitude of features, it is unlikely to observe the same goal twice and to identify styles by looking at the individual goals. However, it is possible to find groups of similar goals. The method from the realm of Machine Learning that is best suitable for this purpose is Cluster Analysis. This notebook demonstrates how to apply this method to a dataset of goals scored in the German Bundesliga season 2022/2023.\nThe data used in this notebook was created by annotating the videos of all 971 goals scored in the 306 matches of the season. They have been assigned different features, e.g. the tactical context from which the goals were scored or the number of passes played before the goal. From these features of each goal, clusters of goals shall be identified, revealing different prototypical playing styles in the creation of goals. Using these clusters, preferred goal scoring styles are examined per team.\nA snippet of the raw dataset is displayed below.\nknitr::kable(head(df_cluster))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhome\naway\nteam\ntactical_context\npasses_before_goal\nprevious_action\naction_leading2goal\npressure\nzone_preassist\nzone_assist\nzone_goal\n\n\n\n\nSGE\nFCB\nFCB\ndirectFreekick\n0\nshortPass\ndirectShot\nnoPressure\n12\n15\n6\n\n\nSGE\nFCB\nFCB\noutswingCornerkick\n4\nshot\ndirectShot\npressure\n20\n18\n9\n\n\nSGE\nFCB\nFCB\nopenPlay\n7+\ncross\nheader\nnoPressure\n11\n17\n9\n\n\nSGE\nFCB\nFCB\nopenPlay\n7+\nshortPass\ndirectShot\nnoPressure\n18\n24\n14\n\n\nSGE\nFCB\nFCB\ncounterAttack\n5\nshortPass\nreceptionAndShot\nnoPressure\n14\n14\n9\n\n\nSGE\nFCB\nSGE\ncounterAttack\n4\nshortPass\ndirectShot\nnoPressure\n11\n14\n5"
  },
  {
    "objectID": "notebooks/clusterGoals.html#creating-numerical-features",
    "href": "notebooks/clusterGoals.html#creating-numerical-features",
    "title": "Clustering Goals in the German Bundesliga",
    "section": "Creating numerical features",
    "text": "Creating numerical features\nIn order to find different, prototypical categories of goals and to assign them to teams,we will perform k-means clustering on the data. The data that we got from our video analysis consists of 8 categorical features for each goal. Since cluster analysis works with numerical data only, we have to transform our categorical variables into numerical ones. This is achieved using a two-step process, by (1) applying One-Hot-Encoding on the categorical variables and then performing dimensionality reduction on the binary variables. As a side note, technically there are options to perform clustering on categorical variables (like k-modes), but experimenting with both yielded better results for the numerical approach.\n\nOne-Hot Encoding\nFirst, our 8 categorical variables are transformed into a so-called dummy matrix. This means that for each variable, a separate column is created for each possible category. Each column then contains only the values \\(0\\) or \\(1\\). Below is a snippet of the first few rows and columns of this matrix:\n\ndf_cluster &lt;- df_cluster %&gt;%\n  select(-home, -away, -team)\nmat &lt;- model.matrix(~. - 1, data = df_cluster)\ndf_dummies &lt;- as.data.frame(mat)\ndf_dummies[,1:10] %&gt;%\n  head() %&gt;%\n  knitr::kable()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntactical_contextdirectFreekick\ntactical_contextoutswingCornerkick\ntactical_contextopenPlay\ntactical_contextcounterAttack\ntactical_contextshortCornerkick\ntactical_contextinswingCornerkick\ntactical_contextindirectFreekick\ntactical_contextthrowin\ntactical_contextpenalty\npasses_before_goal1\n\n\n\n\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n0\n1\n0\n0\n0\n0\n0\n0\n0\n0\n\n\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n\n\n0\n0\n1\n0\n0\n0\n0\n0\n0\n0\n\n\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0\n\n\n0\n0\n0\n1\n0\n0\n0\n0\n0\n0"
  },
  {
    "objectID": "notebooks/clusterGoals.html#dimensionality-reduction",
    "href": "notebooks/clusterGoals.html#dimensionality-reduction",
    "title": "Clustering Goals in the German Bundesliga",
    "section": "Dimensionality reduction",
    "text": "Dimensionality reduction\nNow this matrix contains 86 columns, which are hard to interpret. At the same time, it can be assumed that some of the columns are highly correlated with each other, because they consist of some of the same variables. To address these two problems, a dimensionality reduction technique is now applied. It is assumed that the initial 87 dimensions can be combined in such a way that they still contain most of the input information, but can be reduced to fewer dimensions. For binary datasets, the so-called Singular Value Decomposition (SVD) is preferred. This is now applied to the data. A representation of the data in 1 to 86 dimensions is tried out and it is tested how much percent of the variance in the original dataset can be explained by a representation in the respective dimensionality. The gain in information per additional dimension is particularly important. It is therefore examined how much additional variance can be explained by each additional dimension. This can be examined with the following diagram, the so-called Scree Plot:\n\nsvd_result &lt;- svd(df_dummies)\n\nprop_var_explained &lt;- svd_result$d^2 / sum(svd_result$d^2)\ncum_var_explained  &lt;- cumsum(prop_var_explained)\nplot(prop_var_explained, type = \"b\", xlab = \"Singular value\", ylab = \"Proportion of variance explained\")\n\n#plot(cumsum(prop_var_explained), type = \"b\", xlab = \"Anzahl Dimensionen\", ylab = \"Kumulierte erklärte Varianz\")\nabline(v=4.5, col=\"red\", lty = 2)\nabline(v=6.5, col=\"red\")\n\n\n\n\n\n\n\n\nNatürlicherweise wird durch jede zusätzliche Dimension auch mehr Varianz erklärt. Allerdings nimmt bei hochdimensionalen Daten ab einer gewissen Dimension meist die zusätzlich erklärte Varianz ab. Ein “Ellenbogenpunkt”, welcher eine rapide Änderung der Steigung des Graphen anzeigt, identifiziert die kleinste Dimensionalität, welche noch einen signifikanten Informationsgewinn bedeutet. Nach diesem Punkt flacht die Kurve deutlich ab und jede zusätzliche Dimension verursacht nur noch einen marginalen zusätzlichen Informationsgewinn. Der “Ellenbogenpunkt” ist nur selten eindeutig zu bestimmen. In unserem Diagramm kommen prinzipiell zwei Punkte infrage, welche durch die gestrichelte und die durchgezogene Linie angezeigt werden. Da es sich insgesamt um ein hochdimensionales Problem handelt, wird die durchgezogene Linie gewählt, weil insgesamt bis hierhin noch zusätzliche Varianz erklärt wird und danach der Graph eindeutig abflacht. Diese Linie zeigt eine Dimensionalität von 6 an. Diese wird verwendet, um einen neuen, dimensionsreduzierten Datensatz mit 6 Variablen zu ermitteln. Diese Dimensionen sind nun nicht mehr interpretierbar, können aber für die Clusteranalyse verwendet werden. Eine Übersicht über den neuen Datensatz sieht folgendermaßen aus:\n\n## NOTES:\n  # based on 80% rule, 22 dimensions should be retained\n  # based on visual elbow point, 7 should be retained ( or 29)\n\n# Choose the number of dimensions to retain\nnum_dims &lt;- 6\n\n# Project the data onto these dimensions\nreduced_data &lt;- as.matrix(df_dummies) %*% svd_result$v[, 1:num_dims]\nknitr::kable(head(reduced_data))\n\n\n\n\n-0.452979\n-0.5566330\n0.0899807\n-0.2644000\n0.4703923\n-0.2242417\n\n\n-1.686565\n-0.6473897\n0.2128024\n-0.4694705\n-0.0475723\n0.3277312\n\n\n-1.305201\n0.4821976\n-1.1560128\n-0.4364203\n-0.4972119\n0.0646575\n\n\n-0.891784\n-0.7588065\n-0.9605267\n0.0877693\n0.8343932\n0.2202717\n\n\n-1.127883\n-0.0974868\n0.6735477\n0.7246956\n-0.9630310\n-0.8314999\n\n\n-1.004543\n-0.5489809\n0.8316487\n0.6467081\n0.4734059\n-0.8147062"
  },
  {
    "objectID": "notebooks/clusterGoals.html#clusteranalyse",
    "href": "notebooks/clusterGoals.html#clusteranalyse",
    "title": "Clustering Goals in the German Bundesliga",
    "section": "Clusteranalyse",
    "text": "Clusteranalyse\nAuf die dimensionsreduzierte Matrix, welche 6 Variablen und 871 Beobachtungen enthält, wird nun eine Clusteranalyse angewandt. Hierbei wird der übliche kmeans-Clustering-Algorithmus angewendet. Bei Verwendung dieses Algorithmus wird eine Anzahl k an Clustern festgelegt und der Algorithmus ordnet jede Beobachtung einem der Cluster zu. Dabei werden anhand eines Distanzmaßes (üblicherweise die euklidische Distanz, welche im zweidimensionalen Raum als die räumliche Distanz zwischen zwei Punkten in einem kartesischen Koordinatenssystem dargestellt werden kann) die paarweisen Abstände zwischen Beobachtungen berechnet. Die Beobachtungen werden dann den k Clustern so zugewiesen, dass die durchschnittliche Distanz zu den anderen Beobachtungen im eigenen Cluster minimiert und die durchschnittliche Distanz zu den Beobachtungen in den anderen Clustern maximiert wird. Die Wahl der optimalen Anzahl von Clustern k erfolgt, ähnlich wie bei der Dimensionsreduktion, empirisch. Dazu wird der kmeans-Algorithmus unter Wahl unterschiedlicher Ausprägungen von k wiederholt ausgeführt und es werden bestimmte Kennzahlen zwischen den Durchläufen verglichen. Beim kmeans-Clustering wird als solche Kennzahl typischerweise der Anteil der Gesamtvarianz, welche durch die Einteilung in die verschiedenen Cluster erklärt werden kann, verwendet. Auch hier wird der Zugewinn an erklärter Varianz pro zusätzlichem Cluster grafisch dargestellt und es wird der Punkt gesucht, an dem die zusätzliche Hinzunahme weiterer Cluster nur noch in marginalem Informationszugewinn resultiert. Nachfolgend wird dieses Diagramm für die Werte \\(k=2\\) bis \\(k=100\\) dargestellt:\n\n################### CLUSTERING\n# Create an empty vector to store the total within-cluster sum of squares for each k\ntot_withinss &lt;- numeric(99)\nbetweenss    &lt;- numeric(99)\ntotss        &lt;- numeric(99)\n\n# Loop over different numbers of clusters\nfor (k in 2:100) {\n  set.seed(123) # For reproducibility\n  kmeans_result &lt;- kmeans(reduced_data, centers = k)\n  tot_withinss[k-1] &lt;- kmeans_result$tot.withinss\n  betweenss[k-1] &lt;- kmeans_result$betweenss\n  totss[k-1] &lt;- kmeans_result$totss\n}\n\n# Plot total within-cluster sum of squares as a function of the number of clusters\nvar_explained &lt;- betweenss / totss\nplot(2:100, var_explained, type = \"b\", xlab = \"Anzahl Cluster\", ylab = \"Anteil der erklärten Varianz\")\nabline(v=10.5, col = 'red')\n\n\n\n\n\n\n\n# with new dimensionality in SVD, 10 clusters appear \n# NOTES: gain in variance explained suggests 16 clusters\n# tot within ss plot suggests 17 clusters\n\n# NOTES: not necessarily interpretable goal types; \n#   assigning goals to clusters and then counting per team or per player might also be interesting\n\nAuch hier ist eine eindeutige Identifikation des Ellenbogenpunkts nicht möglich. Es wird eine Anzahl von \\(k=10\\)* Clustern gewählt, weil bis hierhin der letzte große Informationszugewinn erfolgt. Dementsprechend identifiziert die Clusteranalyse 10 verschiedene Arten der Torerzielung. Nachfolgend werden die 871 Tore im Datensatz ihrem jeweiligen Cluster zugeordnet und die Anzahl der vertretenen Cluster pro Mannschaft analysiert. Außerdem wird für jedes Cluster ein “prototypisches” Tor erstellt, welches anhand der Modi der jeweiligen Variablen pro Cluster ermittelt wird, da die 6 Variablen, welche zur Bestimmung der Cluster verwendet wurden, nicht inhaltlich interpretiert werden können.\n\n#### FINAL IMPLEMENTATION\nk &lt;- 10\nkmeans_result &lt;- kmeans(reduced_data, centers = k)\ndat$cluster &lt;- kmeans_result$cluster\ndf_cluster$cluster &lt;- kmeans_result$cluster"
  },
  {
    "objectID": "notebooks/clusterGoals.html#interpretation-der-cluster",
    "href": "notebooks/clusterGoals.html#interpretation-der-cluster",
    "title": "Clustering Goals in the German Bundesliga",
    "section": "Interpretation der Cluster",
    "text": "Interpretation der Cluster\nUm zunächst eine Interpretation der 10 verschiedenen Cluster zu ermöglichen, wird nachfolgend für jedes Cluster ein “prototypisches” Tor ermittelt. Dazu werden jeweils alle Beobachtungen pro Cluster gesammelt und für jede der 8 Variablen im Originaldatensatz, welche die Tore semantisch beschreiben, der Modus ermittelt. Der Modus gibt jene Kategorie einer Variable an, welche im Datensatz am häufigsten auftritt. Auf diese Weise kann das “häufigste” Tor im Datensatz ermittelt werden. Es folgt eine Tabelle, welche pro Cluster die häufigste Kombination von Variablen, und somit jeweils ein “prototypisches” Tor zeigt.\n\nmode &lt;- function(x) {\n  ux &lt;- unique(x)\n  ux[which.max(tabulate(match(x, ux)))]\n}\n\nprototypes &lt;- df_cluster %&gt;%\n  group_by(cluster) %&gt;%\n  summarise_all(mode)\n\nknitr::kable(prototypes)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncluster\ntactical_context\npasses_before_goal\nprevious_action\naction_leading2goal\npressure\nzone_preassist\nzone_assist\nzone_goal\n\n\n\n\n1\nopenPlay\n7+\nshortPass\ndirectShot\npressure\n14\n18\n9\n\n\n2\ndirectFreekick\n1\nshortPass\ndirectShot\nnoPressure\nn.a\n14\n5\n\n\n3\ncounterAttack\n3\nshortPass\nreceptionAndShot\npressure\n14\n14\n9\n\n\n4\nopenPlay\n1\ncross\nheader\npressure\nn.a\n16\n9\n\n\n5\nopenPlay\n7+\nshortPass\nreceptionAndShot\npressure\n14\n14\n9\n\n\n6\ncounterAttack\n2\nshortPass\ndirectShot\npressure\n16\n18\n14\n\n\n7\npenalty\n0\nshortPass\ndirectShot\nnoPressure\nn.a\n18\n9\n\n\n8\ncounterAttack\n2\nshortPass\ndribbleAndShot\npressure\n14\n14\n5\n\n\n9\ninswingCornerkick\n1\ncross\nheader\npressure\nn.a\n16\n14\n\n\n10\ncounterAttack\n4\nshortPass\ndirectShot\npressure\n14\n18\n9\n\n\n\n\n\nDie nachfolgende Grafik zeigt die Anzahl erzielter Tore pro Cluster über die gesamte Stichprobe hinweg:\n\ndf_cluster_perteam &lt;- dat %&gt;%\n  group_by(team, cluster) %&gt;%\n  summarise(count = n(), .groups = \"drop\") %&gt;%\n  group_by(team) %&gt;%\n  mutate(proportion = round(count / sum(count), 2))\n\n# Distribution of goals across Clusters\nggplot(df_cluster_perteam, aes(x = cluster, y = count)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Number of Observations per Cluster\",\n       x = \"Cluster\",\n       y = \"Number of Observations\") +\n  scale_x_continuous(breaks=1:10)"
  },
  {
    "objectID": "notebooks/clusterGoals.html#analyse-der-arten-erzielter-tore-in-abhängigkeit-der-mannschaften",
    "href": "notebooks/clusterGoals.html#analyse-der-arten-erzielter-tore-in-abhängigkeit-der-mannschaften",
    "title": "Clustering Goals in the German Bundesliga",
    "section": "Analyse der Arten erzielter Tore in Abhängigkeit der Mannschaften",
    "text": "Analyse der Arten erzielter Tore in Abhängigkeit der Mannschaften\nDie mithilfe der Clusteranalyse ermittelten Kategorien der Torerzielung sollen nun im Hinblick auf die Mannschaften untersucht werden, welche auf unterschiedliche Weise Tore erzielt haben. Dazu werden die 871 erzielten Tore pro Mannschaft und pro Cluster gezählt. Es soll untersucht werden, welche Mannschaften auf welche Weise die Mehrzahl ihrer Tore schießen.\nDie nachfolgende Tabelle zeigt die Verteilung von Toren in die verschiedenen Cluster in Abhängigkeit von den Mannschaften:\n\ndf_abs_values &lt;- df_cluster_perteam %&gt;%\n  select(-proportion) %&gt;%\n  pivot_wider(names_from = cluster, values_from = count, names_prefix = \"c\") %&gt;%\n  replace(is.na(.), 0)\n\ndf_rel_values &lt;- df_cluster_perteam %&gt;%\n  select(-count) %&gt;%\n  pivot_wider(names_from = cluster, values_from = proportion, names_prefix = \"c\") %&gt;%\n  replace(is.na(.), 0)\n\nteams &lt;- df_rel_values$team\ndf_rel_values$team &lt;- NULL\nbaseline_probs &lt;- round(table(dat$cluster) / dim(dat)[1], 3)\n\nmat &lt;- as.matrix(df_rel_values)\ndf_diffs &lt;- round(data.frame(mat - matrix(rep(baseline_probs, 18), nrow=18, ncol=10, byrow = TRUE)), 2)\ndf_diffs$team &lt;- teams\n\ndf_diffs_long &lt;- df_diffs %&gt;%\n  pivot_longer(cols = c1:c10, names_to = \"cluster\", values_to = \"proportion_diff\") %&gt;%\n  mutate(cluster = as.numeric(gsub(\"c\", \"\", cluster)))\n\nknitr::kable(df_abs_values)\n\n\n\n\nteam\nc1\nc2\nc3\nc4\nc5\nc6\nc7\nc8\nc9\nc10\n\n\n\n\nB04\n11\n2\n8\n5\n10\n6\n6\n4\n1\n4\n\n\nBMG\n13\n1\n6\n5\n5\n2\n3\n7\n1\n9\n\n\nBOC\n3\n0\n2\n3\n4\n6\n5\n4\n6\n7\n\n\nBSC\n1\n2\n4\n3\n5\n4\n7\n3\n2\n11\n\n\nBVB\n17\n4\n5\n6\n19\n8\n5\n8\n4\n7\n\n\nFCA\n6\n0\n3\n2\n4\n5\n5\n5\n5\n7\n\n\nFCB\n24\n1\n7\n4\n21\n13\n3\n12\n2\n5\n\n\nFCU\n8\n3\n3\n10\n2\n7\n4\n4\n3\n7\n\n\nKOE\n9\n1\n2\n6\n3\n4\n8\n5\n5\n6\n\n\nM05\n12\n3\n2\n4\n3\n8\n5\n5\n7\n5\n\n\nRBL\n8\n3\n9\n6\n7\n6\n6\n9\n2\n8\n\n\nS04\n1\n2\n1\n7\n2\n5\n4\n5\n1\n7\n\n\nSCF\n9\n3\n2\n9\n6\n5\n9\n2\n3\n3\n\n\nSGE\n8\n3\n7\n4\n10\n8\n6\n5\n2\n5\n\n\nSVW\n11\n2\n3\n10\n4\n2\n6\n4\n3\n6\n\n\nTSG\n9\n1\n4\n7\n3\n5\n7\n5\n2\n5\n\n\nVFB\n3\n1\n6\n4\n7\n4\n5\n6\n3\n6\n\n\nWOB\n10\n1\n6\n8\n5\n6\n6\n6\n3\n6"
  },
  {
    "objectID": "notebooks/clusterGoals.html#verteilung-der-cluster-pro-mannschaft",
    "href": "notebooks/clusterGoals.html#verteilung-der-cluster-pro-mannschaft",
    "title": "Clustering Goals in the German Bundesliga",
    "section": "Verteilung der Cluster pro Mannschaft",
    "text": "Verteilung der Cluster pro Mannschaft\nDie absoluten Häufigkeiten der Tore pro Cluster pro Mannschaft werden durch die absolute Anzahl geschossener Tore pro Mannschaft verzerrt. Um ein Bild über die Spielstile der Mannschaften zu zeichnen, müssen die relativen Häufigkeiten von Toren pro Cluster in Abhängigkeit von der Gesamtzahl geschossener Tore pro Mannschaft betrachtet werden. Die nachfolgende Heatmap zeigt daher die relative Häufigkeit von Toren in den 10 Clustern in Abhängigkeit von der Mannschaft. Daraus lassen sich sowohl Rückschlusse auf die grundlegende Verteilung von Toren auf die 10 Cluster ziehen als auch auf Besonderheiten im Spielstil einzelner Mannschaften.\n\n## Distribution of clusters per team \nggplot(df_cluster_perteam, aes(team, cluster)) +\n  geom_tile(aes(fill=proportion)) +\n  geom_text(aes(label=proportion), size = 3) +\n  scale_fill_gradient(low = \"white\", high = \"red\") +\n  scale_y_continuous(breaks = 1:10)\n\n\n\n\n\n\n\n\nIn dieser Grafik zeigen sich bereits Muster bestimmter Mannschaften. Allerdings beinhaltet sie auch die Basisrate einzelner Cluster. Daher wird im Folgenden noch die durchschnittliche Häufigkeit von Toren in den 10 Clustern über alle Mannschaften hinweg von den individuellen relativen Häufigkeiten abgezogen, sodass für jede Mannschaft dargestellt wird, wie stark die Häufigkeit der Torerzielung vom Durchschnitt abweicht.\n\n## Deviation of teams' distribution from baseline distribution\nggplot(df_diffs_long, aes(team, cluster)) +\n  geom_tile(aes(fill=proportion_diff)) +\n  geom_text(aes(label=proportion_diff), size = 3) +\n  #scale_fill_viridis(limits = c(-.2, .151), oob = scales::squish)\n  scale_fill_gradient(low = \"red\", high = \"lightgreen\", limits = c(-.2, .2), oob = scales::squish) +\n  scale_y_continuous(breaks = 1:10)\n\n\n\n\n\n\n\n\n\n#write.csv(df_cluster, '/home/max/sciebo/local/dshs/teaching/abschlussarbeiten/Herrmann_Sven/data/Rohdaten_mitCluster.csv')\n#write.csv(df_abs_values, '/home/max/sciebo/local/dshs/teaching/abschlussarbeiten/Herrmann_Sven/data/Cluster_perTeam_absolut.csv')\n#write.csv(df_rel_values, '/home/max/sciebo/local/dshs/teaching/abschlussarbeiten/Herrmann_Sven/data/Cluster_perTeam_relativ.csv')\n#write.csv(df_diffs, '/home/max/sciebo/local/dshs/teaching/abschlussarbeiten/Herrmann_Sven/data/Cluster_perTeam_Differenz.csv')"
  },
  {
    "objectID": "posts/2024-09-13-Confounding-In-Match-Analysis-Research/index.html",
    "href": "posts/2024-09-13-Confounding-In-Match-Analysis-Research/index.html",
    "title": "Confounding in Match Analysis Research",
    "section": "",
    "text": "The problem of confounding refers to the case in which an observed association between variables is confounded for (i.e. confused with) the actual causal effect of interest (Greenland, Pearl, and Robins 1999). If the observed association is biased by systematic differences between samples or an unobserved covariate, the confounding problem leads to false inferences. If the observed association is unbiased and (approximately) equals the effect under investigation, no confounding is present. One of the earliest mentions of the term confounding can be found in the work by John Stuart Mill (Mill 1843). He states a requirement for an experiment to enable causal inferences:\n\n“. . . none of the circumstances [of the experiment] that we do know shall have effects susceptible of being confounded with those of the agents whose properties we wish to study.”\n\nThis definition, which has been followed by most modern literature (Greenland and Morgenstern 2001), states that confounding emerges due to effects of certain study characteristics that have not been accounted for. Translating this definition to the case of Match Analysis Research, the problem of confounding would mean that the observed association between a Performance Indicator of interest and a Success Indicator would be biased by a circumstance of the study, more specifically a Contextual Factor that has not been accounted for. This biased association would then be confounded for the actual effect of the Performance Indicator on the Success Indicator (for a detailed discussion of confounding, see (Greenland, Pearl, and Robins 1999)). With respect to the mathematical formalization of the problem, a distinction has to be made between counterfactual and collapsibility-based concepts of confounding (Greenland and Morgenstern 2001). While the former emerges due to differences between the populations under comparison, the latter is caused by an unaccounted covariate and, therefore, reflects the scenario present in studies of Match Analysis Research. Specifically, collapsibility is a term to describe an association between variables and the effect of a potential covariate on this association. A measure of association between \\(X\\) and \\(Y\\) is said to be strictly collapsible across \\(Z\\) if it is constant across all strata (subgroups) defined by \\(Z\\) and if this constant value equals the value obtained from the marginal table (i.e., ignoring \\(Z\\)) (Whittemore 1978); (Greenland, Pearl, and Robins 1999). For the MAR setting, \\(X\\) would correspond to a given Performance Indicator, \\(Y\\) would correspond to a Success Indicator and \\(Z\\) would correspond to any Contextual Factor. Within this application, the relationship between Performance Indicator \\(X\\) and Success Indicator \\(Z\\) would be collapsible across Contextual Factor \\(Z\\) if the association between \\(X\\) and \\(Y\\) would be constant across all levels of \\(Z\\) and this association would be equal to the association between \\(X\\) and \\(Y\\) when ignoring \\(Z\\) (i.e. the marginal association between \\(X\\) and \\(Y\\)). A violation of this condition leads to noncollapsibility of the respective measure of association across the respective covariate \\(Z\\). The most important implication of noncollapsibility is that it renders the marginal association between \\(X\\) and \\(Y\\) biased and requires conditioning on \\(Z\\) (or alternatively, the inclusion of \\(Z\\) as a covariate in the analysis). Identification of noncollapsibility is therefore crucial to determine the set of included covariates. Confounding of the association between \\(X\\) and \\(Y\\) due to noncollapsibility occurs if a covariate \\(Z\\) has an effect on both \\(X\\) and \\(Y\\), a scenario depicted in the causal diagram in Fig. TODO. Graph theory shows that a common cause \\(Z\\) will create an association between its effects \\(X\\) and \\(Y\\) [(Pearl 1995)]. Therefore, the observed association between \\(X\\) and \\(Y\\) will consist of two separate effects: the actual association between \\(X\\) and \\(Y\\), independent from \\(Z\\) and the one introduced by the confounding effect of \\(Z\\). If the effect introduced through confounding is of the opposite direction and of sufficient magnitude, it might reverse the actual association, as is the case in the famous example of Simpson’s paradox ((Simpson 1951); for an explanation in the light of confounding, see (Hernán, Clayton, and Keiding 2011)). Applying these considerations to the MAR setting, it can be stated that a Contextual Factor \\(Z\\) possesses the potential to confound the association between a Performance Indicator \\(X\\) and a Success Indicator \\(Y\\) if it affects both \\(X\\) and \\(Y\\) and the association between \\(X\\) and \\(Y\\) is found to be noncollapsible across levels of \\(Z\\).\n\n\n\n\nReferences\n\nGreenland, Sander, and Hal Morgenstern. 2001. “Confounding in Health Research.” Annual Review of Public Health 22 (1): 189–212. https://doi.org/10.1146/annurev.publhealth.22.1.189.\n\n\nGreenland, Sander, Judea Pearl, and James M. Robins. 1999. “Confounding and Collapsibility in Causal Inference.” Statistical Science 14 (1). https://doi.org/10.1214/ss/1009211805.\n\n\nHernán, Miguel A., David Clayton, and Niels Keiding. 2011. “The Simpson’s Paradox Unraveled.” International Journal of Epidemiology 40 (3): 780–85. https://doi.org/10.1093/ije/dyr041.\n\n\nMill, John Stuart. 1843. A System of Logic: Ratiocinative and Inductive : Being a Connected View of the Principles of Evidence and the Methods of Scientific Investigation. Repr. Honolulu, Hawaii: Univ. Press of the Pacific.\n\n\nPearl, Judea. 1995. “Causal Diagrams for Empirical Research.” Biometrika 82 (4): 702–10. https://doi.org/10.1093/biomet/82.4.702.\n\n\nSimpson, E. H. 1951. “The Interpretation of Interaction in Contingency Tables.” Journal of the Royal Statistical Society Series B: Statistical Methodology 13 (2): 238–41. https://doi.org/10.1111/j.2517-6161.1951.tb00088.x.\n\n\nWhittemore, Alice S. 1978. “Collapsibility of Multidimensional Contingency Tables.” Journal of the Royal Statistical Society: Series B (Methodological) 40 (3): 328–40. https://doi.org/10.1111/j.2517-6161.1978.tb01046.x.\n\nCitationBibTeX citation:@online{klemp2024,\n  author = {Klemp, Maximilian},\n  title = {Confounding in {Match} {Analysis} {Research}},\n  date = {2024-09-13},\n  url = {https://maxk92.github.io/posts/2024-09-13-Confounding-In-Match-Analysis-Research/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nKlemp, Maximilian. 2024. “Confounding in Match Analysis\nResearch.” September 13, 2024. https://maxk92.github.io/posts/2024-09-13-Confounding-In-Match-Analysis-Research/."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Max Klemp Personal Website",
    "section": "",
    "text": "Include either Blog Listing or About page here"
  },
  {
    "objectID": "publications.html",
    "href": "publications.html",
    "title": "Publications",
    "section": "",
    "text": "Maximilian Klemp and Robert Rein and Daniel Memmert\n\n13th World Congress of Performance Analysis of Sport and 13th International Symposium on Computer Science in Sport, 2023\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDaniel Memmert and Maximilian Klemp and Sebastian Schwab and Benedict Low\nInternational Journal of Sport and Exercise Psychology, 2023\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMichel Brinkschulte and Philip Furley and Maximilian Klemp and Daniel Memmert\nScientific Reports, 2021\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMaximilian Klemp and Daniel Memmert and Robert Rein\nInternational Journal of Sports Science & Coaching, 2021\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMaximilian Klemp and Fabian Wunderlich and Daniel Memmert\nScientific Reports, 2021\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBerni Guerrero-Calderón and Maximilian Klemp and José Alfonso Morcillo and Daniel Memmert\nInternational Journal of Sports Science & Coaching, 2021\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBerni Guerrero-Calderón and Maximilian Klemp and Alfonso Castillo-Rodriguez and José Alfonso Morcillo and Daniel Memmert\nInternational Journal of Sports Medicine, 2020\n PDF      BibTeX      DOI"
  },
  {
    "objectID": "publications.html#peer-reviewed-articles",
    "href": "publications.html#peer-reviewed-articles",
    "title": "Publications",
    "section": "",
    "text": "Maximilian Klemp and Robert Rein and Daniel Memmert\n\n13th World Congress of Performance Analysis of Sport and 13th International Symposium on Computer Science in Sport, 2023\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDaniel Memmert and Maximilian Klemp and Sebastian Schwab and Benedict Low\nInternational Journal of Sport and Exercise Psychology, 2023\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMichel Brinkschulte and Philip Furley and Maximilian Klemp and Daniel Memmert\nScientific Reports, 2021\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMaximilian Klemp and Daniel Memmert and Robert Rein\nInternational Journal of Sports Science & Coaching, 2021\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMaximilian Klemp and Fabian Wunderlich and Daniel Memmert\nScientific Reports, 2021\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBerni Guerrero-Calderón and Maximilian Klemp and José Alfonso Morcillo and Daniel Memmert\nInternational Journal of Sports Science & Coaching, 2021\n PDF      BibTeX      DOI\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBerni Guerrero-Calderón and Maximilian Klemp and Alfonso Castillo-Rodriguez and José Alfonso Morcillo and Daniel Memmert\nInternational Journal of Sports Medicine, 2020\n PDF      BibTeX      DOI"
  },
  {
    "objectID": "publications.html#book-chapters",
    "href": "publications.html#book-chapters",
    "title": "Publications",
    "section": "Book Chapters",
    "text": "Book Chapters\n\n2024\n\n\n\n\n\n\n\n\n\nPython\nMaximilian Klemp\nIn Memmert, D.: Computer Science in Sports, 2024\n BibTeX      DOI\n\n\n\n\n\n\n2023\n\n\n\n\n\n\n\n\n\nPython\nMaximilian Klemp\nIn Memmert, D.: Sportinformatik, 2023\n BibTeX      DOI\n\n\n\n\n\n\n2022\n\n\n\n\n\n\n\n\n\nPhysische KPIs\nMaximilian Klemp\nIn Memmert, D.: Spielanalyse im Sportspiel, 2022\n BibTeX      DOI\n\n\n\n\n\n\n2021\n\n\n\n\n\n\n\n\n\nPhysical KPIs\nMaximilian Klemp\nIn Memmert, D.: Match Analysis, 2021\n BibTeX      DOI"
  },
  {
    "objectID": "publications/articles/klemp2021b.html",
    "href": "publications/articles/klemp2021b.html",
    "title": "In-play forecasting in football using event and positional data",
    "section": "",
    "text": "Two highly relevant aspects of football, namely forecasting of results and performance analysis by means of performance indicators, are combined in the present study by analysing the value of in-play information in terms of event and positional data in forecasting the further course of football matches. Event and positional data from 50 matches, including more than 300 million datapoints were used to extract a total of 18 performance indicators. Moreover, goals from more than 30,000 additional matches have been analysed. Results suggest that surprisingly goals do not possess any relevant informative value on the further course of a match, if controlling for pre-game market expectation by means of betting odds. Performance indicators based on event and positional data have been shown to possess more informative value than goals, but still are not sufcient to reveal signifcant predictive value in-play. The present results are relevant to match analysts and bookmakers who should not overestimate the value of in-play information when explaining match performance or compiling in-play betting odds. Moreover, the framework presented in the present study has methodological implications for performance analysis in football, as it suggests that researchers should increasingly segment matches by scoreline and control carefully for general team strength."
  },
  {
    "objectID": "publications/articles/klemp2021b.html#abstract",
    "href": "publications/articles/klemp2021b.html#abstract",
    "title": "In-play forecasting in football using event and positional data",
    "section": "",
    "text": "Two highly relevant aspects of football, namely forecasting of results and performance analysis by means of performance indicators, are combined in the present study by analysing the value of in-play information in terms of event and positional data in forecasting the further course of football matches. Event and positional data from 50 matches, including more than 300 million datapoints were used to extract a total of 18 performance indicators. Moreover, goals from more than 30,000 additional matches have been analysed. Results suggest that surprisingly goals do not possess any relevant informative value on the further course of a match, if controlling for pre-game market expectation by means of betting odds. Performance indicators based on event and positional data have been shown to possess more informative value than goals, but still are not sufcient to reveal signifcant predictive value in-play. The present results are relevant to match analysts and bookmakers who should not overestimate the value of in-play information when explaining match performance or compiling in-play betting odds. Moreover, the framework presented in the present study has methodological implications for performance analysis in football, as it suggests that researchers should increasingly segment matches by scoreline and control carefully for general team strength."
  },
  {
    "objectID": "publications/articles/klemp2021b.html#downloads",
    "href": "publications/articles/klemp2021b.html#downloads",
    "title": "In-play forecasting in football using event and positional data",
    "section": "Downloads",
    "text": "Downloads\nBibTeX PDF"
  },
  {
    "objectID": "publications/articles/guerrerocalderon2021.html",
    "href": "publications/articles/guerrerocalderon2021.html",
    "title": "How does the workload applied during the training week and the contextual factors affect the physical responses of professional soccer players in the match?",
    "section": "",
    "text": "The aim of this study was to examine whether match physical output can be predicted from the workload applied in training by professional soccer players. Training and match load records from two professional soccer teams belonging to the Spanish First and Second Division were collected through GPS technology over a season (N ¼ 1678 and N ¼ 2441 records, respectively). The factors playing position, season period, quality of opposition, category and playing formation were considered into the analysis. The level of significance was set at p .05. The prediction models yielded a conditional R-squared in match of 0.51 in total distance (TD); 0.58 in high-intensity distance (HIRD, from 14 to 24 \\(km \\cdot  h^{-1}\\)); and 0.60 in sprint distance (SPD, &gt;24 \\(km \\cdot  h^{-1}\\)). The main finding of this study was that the physical output of players in the match was predicted from the training-load performed during the previous training week. The training-TD negatively affected the match physical output while the training-HIRD showed a positive effect. Moreover, the contextual factors – playing position, season period, division and quality of opposition – affected the players’ physical output in the match. Therefore, these results suggest the appropriateness of programming lower training volume but increasing the intensity of the activity throughout the weekly microcycle, and considering contextual factors within the load programming."
  },
  {
    "objectID": "publications/articles/guerrerocalderon2021.html#abstract",
    "href": "publications/articles/guerrerocalderon2021.html#abstract",
    "title": "How does the workload applied during the training week and the contextual factors affect the physical responses of professional soccer players in the match?",
    "section": "",
    "text": "The aim of this study was to examine whether match physical output can be predicted from the workload applied in training by professional soccer players. Training and match load records from two professional soccer teams belonging to the Spanish First and Second Division were collected through GPS technology over a season (N ¼ 1678 and N ¼ 2441 records, respectively). The factors playing position, season period, quality of opposition, category and playing formation were considered into the analysis. The level of significance was set at p .05. The prediction models yielded a conditional R-squared in match of 0.51 in total distance (TD); 0.58 in high-intensity distance (HIRD, from 14 to 24 \\(km \\cdot  h^{-1}\\)); and 0.60 in sprint distance (SPD, &gt;24 \\(km \\cdot  h^{-1}\\)). The main finding of this study was that the physical output of players in the match was predicted from the training-load performed during the previous training week. The training-TD negatively affected the match physical output while the training-HIRD showed a positive effect. Moreover, the contextual factors – playing position, season period, division and quality of opposition – affected the players’ physical output in the match. Therefore, these results suggest the appropriateness of programming lower training volume but increasing the intensity of the activity throughout the weekly microcycle, and considering contextual factors within the load programming."
  },
  {
    "objectID": "publications/articles/guerrerocalderon2021.html#downloads",
    "href": "publications/articles/guerrerocalderon2021.html#downloads",
    "title": "How does the workload applied during the training week and the contextual factors affect the physical responses of professional soccer players in the match?",
    "section": "Downloads",
    "text": "Downloads\nBibTeX PDF"
  },
  {
    "objectID": "publications/articles/guerrerocalderon2020.html",
    "href": "publications/articles/guerrerocalderon2020.html",
    "title": "A New Approach for Training-load Quantification in Elite-level Soccer: Contextual Factors",
    "section": "",
    "text": "The aims of this study were to analyse the physical responses of professional soccer players during training considering the contextual factors of match location, season period, and quality of the opposition; and to establish prediction models of physical responses during training sessions. Training data was obtained from 30 professional soccer players from Spanish La Liga using global positioning technology (N = 1365 performances). A decreased workload was showed during training weeks prior to home matches, showing large eff ects in power events, equivalent distance, total distance, walk distance and low-speed running distance. Also, the quality of the opposition also affected the training workload (p &lt; 0.05). All regressionmodels showed moderate eff ects, with an adjusted R2 of 0.37 for metabolic-work, 0.34 for total distance covered, 0.25 for high-speed running distance (18–21 \\(km \\cdot h ^{-1}\\)), 0.29 for very high-speed running distance (21–24 \\(km \\cdot h ^{-1}\\)), 0.22 for sprint running distance ( &gt; 24 \\(km \\cdot h ^{-1}\\)) and 0.34 for equivalent distance. The main fi nding of this study was the great association of match location, season period and quality of opposition on the workload performed by players in the training week before the match; and the development of workload prediction-models considering these contextual factors, thus proposing a new and innovative approach to quantify the workload in soccer."
  },
  {
    "objectID": "publications/articles/guerrerocalderon2020.html#abstract",
    "href": "publications/articles/guerrerocalderon2020.html#abstract",
    "title": "A New Approach for Training-load Quantification in Elite-level Soccer: Contextual Factors",
    "section": "",
    "text": "The aims of this study were to analyse the physical responses of professional soccer players during training considering the contextual factors of match location, season period, and quality of the opposition; and to establish prediction models of physical responses during training sessions. Training data was obtained from 30 professional soccer players from Spanish La Liga using global positioning technology (N = 1365 performances). A decreased workload was showed during training weeks prior to home matches, showing large eff ects in power events, equivalent distance, total distance, walk distance and low-speed running distance. Also, the quality of the opposition also affected the training workload (p &lt; 0.05). All regressionmodels showed moderate eff ects, with an adjusted R2 of 0.37 for metabolic-work, 0.34 for total distance covered, 0.25 for high-speed running distance (18–21 \\(km \\cdot h ^{-1}\\)), 0.29 for very high-speed running distance (21–24 \\(km \\cdot h ^{-1}\\)), 0.22 for sprint running distance ( &gt; 24 \\(km \\cdot h ^{-1}\\)) and 0.34 for equivalent distance. The main fi nding of this study was the great association of match location, season period and quality of opposition on the workload performed by players in the training week before the match; and the development of workload prediction-models considering these contextual factors, thus proposing a new and innovative approach to quantify the workload in soccer."
  },
  {
    "objectID": "publications/articles/guerrerocalderon2020.html#downloads",
    "href": "publications/articles/guerrerocalderon2020.html#downloads",
    "title": "A New Approach for Training-load Quantification in Elite-level Soccer: Contextual Factors",
    "section": "Downloads",
    "text": "Downloads\nBibTeX PDF"
  },
  {
    "objectID": "publications/chapters/klemp2023b.html",
    "href": "publications/chapters/klemp2023b.html",
    "title": "Python",
    "section": "",
    "text": "Dieses Kapitel führt die Programmiersprache Python und deren Relevanz für die Sportinformatik ein. Begründet ist die Nutzung von Programmiersprachen in der Sportinformatik in der Vielfalt der anfallenden Aufgaben von Datenimport über Vorverarbeitung und Visualisierung bis hin zur statistischen Modellierung. Python ist als dynamische, objektorientierte, höhere Programmiersprache unter Datenwissenschaftler*innen besonders beliebt und hat somit auch Einzug in die Sportdatenanalyse gehalten. Die Vielfalt an Funktionalitäten, die durch Python-Bibliotheken bereitgestellt wird, ermöglicht es, den gesamten Analyseprozess vollständig in Python abzubilden. Dieser Prozess besteht aus Datenimport, Vorverarbeitung in Form von Filterung, Gruppierung und Aggregierung, Visualisierung sowie Modellierung mittels „herkömmlicher“ Inferenzstatistik oder maschinellem Lernen und wird in diesem Kapitel inklusive der erforderlichen Bibliotheken beleuchtet."
  },
  {
    "objectID": "publications/chapters/klemp2023b.html#abstract",
    "href": "publications/chapters/klemp2023b.html#abstract",
    "title": "Python",
    "section": "",
    "text": "Dieses Kapitel führt die Programmiersprache Python und deren Relevanz für die Sportinformatik ein. Begründet ist die Nutzung von Programmiersprachen in der Sportinformatik in der Vielfalt der anfallenden Aufgaben von Datenimport über Vorverarbeitung und Visualisierung bis hin zur statistischen Modellierung. Python ist als dynamische, objektorientierte, höhere Programmiersprache unter Datenwissenschaftler*innen besonders beliebt und hat somit auch Einzug in die Sportdatenanalyse gehalten. Die Vielfalt an Funktionalitäten, die durch Python-Bibliotheken bereitgestellt wird, ermöglicht es, den gesamten Analyseprozess vollständig in Python abzubilden. Dieser Prozess besteht aus Datenimport, Vorverarbeitung in Form von Filterung, Gruppierung und Aggregierung, Visualisierung sowie Modellierung mittels „herkömmlicher“ Inferenzstatistik oder maschinellem Lernen und wird in diesem Kapitel inklusive der erforderlichen Bibliotheken beleuchtet."
  },
  {
    "objectID": "publications/chapters/klemp2023b.html#downloads",
    "href": "publications/chapters/klemp2023b.html#downloads",
    "title": "Python",
    "section": "Downloads",
    "text": "Downloads\nBibTeX\nPDF"
  },
  {
    "objectID": "publications/chapters/klemp2022.html",
    "href": "publications/chapters/klemp2022.html",
    "title": "Physische KPIs",
    "section": "",
    "text": "Die Analyse der physischen Leistung nahm ihren Anfang mit der Auswertung von Videodaten und erlebte einen Quantensprung durch die automatisierte Generierung und Nutzung von Positionsdaten (s. Infobox „Untersuchung der physischen Leistung“). Mithilfe dieser Daten ist eine detaillierte und umfassende Analyse des Laufverhaltens der Spieler und somit eine Abschätzung der physischen Leistung unter Berücksichtigung zahlreicher kontextueller Informationen möglich. Physische Parameter werden in der Spielanalyse primär eingesetzt, um die Belastungsintensität und den Energieverbrauch während eines Spiels oder einzelner Phasen abzuschätzen (Carling et al., 2005). Diese Erkenntnisse werden dann genutzt, um in Kombination mit Daten aus dem Training die Beanspruchung einzelner Spieler zu quantifizieren und unter Umständen Anpassungen der Trainingsreize vorzunehmen. Auf diese Weise sollen sowohl Über- als auch Unterbelastung vermieden werden.\nBibTeX\nPDF"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Hello and thank you for visiting my page! My name is Max and I recently completed an exciting journey in the world of Sports Analytics with my PhD from the German Sport University Cologne.\nMy passion lies at the crossroads of exercise science and data analysis, trying to generate data-driven insights into health, training methodologies and, as a personal area of interest, into the mathematical laws behind the beautiful game, football."
  },
  {
    "objectID": "about.html#section",
    "href": "about.html#section",
    "title": "About",
    "section": "",
    "text": "Hello and thank you for visiting my page! My name is Max and I recently completed an exciting journey in the world of Sports Analytics with my PhD from the German Sport University Cologne.\nMy passion lies at the crossroads of exercise science and data analysis, trying to generate data-driven insights into health, training methodologies and, as a personal area of interest, into the mathematical laws behind the beautiful game, football."
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "About",
    "section": "Education",
    "text": "Education\nCurrently: PhD in Sports Science\nGerman Sport University Cologne\nM. Sc. in Exercise Science & Coaching (2019)\nGerman Sport University Cologne\nB. Sc. in Sports and Performance (2016)\nGerman Sport University Cologne"
  },
  {
    "objectID": "about.html#experience",
    "href": "about.html#experience",
    "title": "About",
    "section": "Experience",
    "text": "Experience\n2019 - 2023 Research Associate at the Institute for Exercise Training and Sport Informatics\nGerman Sport University Cologne"
  },
  {
    "objectID": "publications/chapters/klemp2021c.html",
    "href": "publications/chapters/klemp2021c.html",
    "title": "Physical KPIs",
    "section": "",
    "text": "This chapter discusses the analysis and importance of parameters which reflect the physical efforts of players and are mostly extracted from positional data. It reveals the history of time-motion data analysis, from early video-based approaches to the advent of spatiotemporal tracking data. Then, different applications of physical data are reviewed, from the early efforts to quantify training and match load, covering the estimation of energy expenditure, finishing with potential future usage of physical KPIs for performance analysis. In this chapter, the major raw data type used for physical analysis, positional data, is pictured as well as the different data acquisition methods for positional data (GPS, LPS/telemetry, computer vision from video data) with their advantages and drawbacks. Finally, the different parameters that can be obtained and analyzed are discussed, starting with simple metrics like distance covered and leading up to their extensions like the integrated approach or the metabolic power approach. Additionally, guidelines as well as important premises for the analysis of physical data in the applied setting as well as in research are outlined.\nBibTeX\nPDF"
  },
  {
    "objectID": "publications/articles/memmert2023.html",
    "href": "publications/articles/memmert2023.html",
    "title": "Individual attention capacity enhances in-field group performances in soccer",
    "section": "",
    "text": "Visual attention capacity impacts performance in different laboratory and real-world tasks positively. The present field-study extends for the first time performance gains from individuals to team performance. Our study examined the attention capacity of 88 soccer players to create low vs. high attention capacity teams (LACT vs. HACT) who competed in a controlled field-study. Positional data were gathered using player tracking systems (1 Hz) in a standardised 11 vs. 11 soccer game. Key performance indicators (KPIs), which have been established in match analysis research, were measured to reflect tactical performance of the teams. As predicted from attention frameworks, HACT outperformed LACT in five out of seven KPIs, suggesting that attention capacity might play a crucial role for/in searching and gathering important space on the pitch. These findings provide evidence for attention being a predictor of team success. Practice task designs with an emphasis on attention capacity therefore could be a useful tool to study the emergent behavioural dynamics in a real-world environment."
  },
  {
    "objectID": "publications/articles/memmert2023.html#abstract",
    "href": "publications/articles/memmert2023.html#abstract",
    "title": "Individual attention capacity enhances in-field group performances in soccer",
    "section": "",
    "text": "Visual attention capacity impacts performance in different laboratory and real-world tasks positively. The present field-study extends for the first time performance gains from individuals to team performance. Our study examined the attention capacity of 88 soccer players to create low vs. high attention capacity teams (LACT vs. HACT) who competed in a controlled field-study. Positional data were gathered using player tracking systems (1 Hz) in a standardised 11 vs. 11 soccer game. Key performance indicators (KPIs), which have been established in match analysis research, were measured to reflect tactical performance of the teams. As predicted from attention frameworks, HACT outperformed LACT in five out of seven KPIs, suggesting that attention capacity might play a crucial role for/in searching and gathering important space on the pitch. These findings provide evidence for attention being a predictor of team success. Practice task designs with an emphasis on attention capacity therefore could be a useful tool to study the emergent behavioural dynamics in a real-world environment."
  },
  {
    "objectID": "publications/articles/memmert2023.html#downloads",
    "href": "publications/articles/memmert2023.html#downloads",
    "title": "Individual attention capacity enhances in-field group performances in soccer",
    "section": "Downloads",
    "text": "Downloads\nBibTeX PDF"
  },
  {
    "objectID": "publications/articles/klemp2023.html",
    "href": "publications/articles/klemp2023.html",
    "title": "Analyzing Collapsibility in Performance Analysis in Sports",
    "section": "",
    "text": "Performance analysis in elite football aims at linking the performance of teams to outcomes. To this end, success indicators (SI) are modelled as a function of performance indicators (PI) using statistical techniques. The aggregation of data on a certain level, however, poses the risk of overlooking effects of contextual factors, which might affect the association between PI and SI. If a contextual factor affects an association in this way, the association is said to be non-collapsible across the respective contextual variable. We analyzed 862 segments from the 1st German Bundesliga and examined the association between running performance and goal scoring with respect to the scoreline. We showed that the effect of running performance on success varies for different levels of scoreline, therefore this association is non-collapsible across scoreline. This finding has important implications for match analysis research, stating the need to account for scoreline and consequently adopting a segmented approach to match analysis."
  },
  {
    "objectID": "publications/articles/klemp2023.html#abstract",
    "href": "publications/articles/klemp2023.html#abstract",
    "title": "Analyzing Collapsibility in Performance Analysis in Sports",
    "section": "",
    "text": "Performance analysis in elite football aims at linking the performance of teams to outcomes. To this end, success indicators (SI) are modelled as a function of performance indicators (PI) using statistical techniques. The aggregation of data on a certain level, however, poses the risk of overlooking effects of contextual factors, which might affect the association between PI and SI. If a contextual factor affects an association in this way, the association is said to be non-collapsible across the respective contextual variable. We analyzed 862 segments from the 1st German Bundesliga and examined the association between running performance and goal scoring with respect to the scoreline. We showed that the effect of running performance on success varies for different levels of scoreline, therefore this association is non-collapsible across scoreline. This finding has important implications for match analysis research, stating the need to account for scoreline and consequently adopting a segmented approach to match analysis."
  },
  {
    "objectID": "publications/articles/klemp2023.html#downloads",
    "href": "publications/articles/klemp2023.html#downloads",
    "title": "Analyzing Collapsibility in Performance Analysis in Sports",
    "section": "Downloads",
    "text": "Downloads\nBibTeX PDF"
  },
  {
    "objectID": "publications/articles/klemp2021.html",
    "href": "publications/articles/klemp2021.html",
    "title": "The influence of running performance on scoring the first goal in a soccer match",
    "section": "",
    "text": "Previous studies investigating running distance in high performance soccer have led to contradictory evidence, potentially due to ignoring contextual information during match phases. The present study therefore examined the relationship between running performance and goal scoring in a football match for a standardised score line. In a sample of 302 matches from the first German Bundesliga, the first goal was modelled as a function of the teams’ running performance and team strength using logistic regression. Goodness of fit was assessed by the prediction accuracy of the model utilising cross-validation. The best model showed a mean accuracy of 77%, reflecting a strong relationship between running performance and the probability of scoring the first goal. This relationship was strongest for total running distance compared to high-speed, sprint or in-possession running distance. We propose two different potential mechanisms to explain the relationship between running performance and goal-scoring found in the present study. These are (1) better ability to reach tactical aims or (2) accumulation of fatigue in the opponent. Future studies should build on these results by further examining the relationship between running performance and success using a more granular segmentation of matches.\nBibTeX\nPDF"
  },
  {
    "objectID": "publications/articles/brinkschulte2021.html",
    "href": "publications/articles/brinkschulte2021.html",
    "title": "English goalkeepers are not responsible for England’s poor performance in penalty shootouts in the past",
    "section": "",
    "text": "Scrutinizing public opinion is one of the central goals of science as the divergence between public opinion and scientifc evidence can have negative consequences. The present study aims to further investigate the alleged English ‘penalty curse’ and determine if it can be linked to the prevalent stereotype of the ‘English goalkeeper problem’. We analyzed a large sample of 2379 penalty kicks that 629 diferent goalkeepers faced in World Cups and European Championships, as well as in the Champions and Europa League by comparing the goalkeeper success rates of diferent nations by ftting a generalized linear model (binomial regression) to the data. However, the results do not reveal meaningful diferences between the success rates (on average 22.23%). Consequently, we conclude that English goalkeepers are not responsible for England’s poor performance in penalties in the past as they perform as well as goalkeepers from other nations and, in turn, provide a counterargument to the widespread stereotype that ‘England has a goalkeeper problem’.\nBibTeX\nPDF"
  },
  {
    "objectID": "portfolio.html",
    "href": "portfolio.html",
    "title": "Project Portfolio",
    "section": "",
    "text": "This page displays an overview of the projects I have been working on in the past.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nA ggplot2 Tutorial\n\n\n\nR\n\n\nplotting\n\n\n\nA tutorial on the use of ggplot2 in R.\n\n\n\nMaximilian Klemp\n\n\nNov 26, 2023\n\n\n\n\n\nWord Count\n\n\n5,190 words\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBuilding Soccer Match Reports\n\n\n\nR\n\n\nquarto\n\n\nplotting\n\n\nsoccer\n\n\n\nA Match Report of the final of the Women’s World Cup in Soccer in 2023, based on free StatsBomb event data.\n\n\n\nMaximilian Klemp\n\n\nOct 21, 2023\n\n\n\n\n\nWord Count\n\n\n1,275 words\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nClustering Goals in the German Bundesliga\n\n\n\nR\n\n\nmachine learning\n\n\nsoccer\n\n\n\nExamining soccer teams’ playing styles by identifying clusters of goals scored in the German Bundesliga.\n\n\n\nMaximilian Klemp\n\n\nJul 15, 2023\n\n\n\n\n\nWord Count\n\n\n2,093 words\n\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/2024-05-18-Expected-Goals-is-not-a-Classification-Problem/index.html",
    "href": "posts/2024-05-18-Expected-Goals-is-not-a-Classification-Problem/index.html",
    "title": "Expected Goals is not a Classification Problem!",
    "section": "",
    "text": "Barely a metric from the Football Analytics realm has received attention in a similar way as the Expected Goals-metric (xG). Most TV broadcasters include the cumulative xG values of both teams at half and full-time. Coaches and pundits alike comment on the xG values, attempting to attribute unfavorable results to bad luck rather than to bad skill. The widespread use of xG in TV shows, on websites, and in locker rooms brings the need for reliable and trustworthy xG models. Only if they draw a better picture of how a match unfolded than “raw” goals they will be embraced by the professional football community. Case studies that successfully use the xG metric for real-world problems build trust in the method. For example, Expected Goals form a valid basis for judging coach dismissals (Flepp and Franck 2020) and enable better predictions of future results than goals (Mead, O’Hare, and McMenemy 2023). But besides proving the general validity of the xG construct, it is imperative to create models that produce reliable estimates of scoring probabilities.\nThis challenge is essentially a mathematical one and since Expected Goals models are almost exclusively built using Supervised Machine Learning algorithms, it seems straightforward to adopt time-tested approaches from Machine Learning to evaluate the models. However, this is exactly the mistake that this post is meant to expose and we will see in a minute why it is not a good idea to view Expected Goals as a Classification Problem.\nShort description of classification algorithms and example of perfect separation on the xg problem\nshort description of classification evaluation metrics\n\n\n\n\nReferences\n\nFlepp, Raphael, and Egon Franck. 2020. “The Performance Effects of Wise and Unwise Managerial Dismissals.” Economic Inquiry 59 (1): 186–98. https://doi.org/10.1111/ecin.12924.\n\n\nMead, James, Anthony O’Hare, and Paul McMenemy. 2023. “Expected Goals in Football: Improving Model Performance and Demonstrating Value.” Edited by Rabiu Muazu Musa. PLOS ONE 18 (4): e0282295. https://doi.org/10.1371/journal.pone.0282295.\n\nCitationBibTeX citation:@online{klemp2024,\n  author = {Klemp, Maximilian},\n  title = {Expected {Goals} Is Not a {Classification} {Problem!}},\n  date = {2024-05-18},\n  url = {https://maxk92.github.io/posts/2024-05-18-Expected-Goals-is-not-a-Classification-Problem/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nKlemp, Maximilian. 2024. “Expected Goals Is Not a Classification\nProblem!” May 18, 2024. https://maxk92.github.io/posts/2024-05-18-Expected-Goals-is-not-a-Classification-Problem/."
  },
  {
    "objectID": "notebooks/matchReport.html",
    "href": "notebooks/matchReport.html",
    "title": "Building Soccer Match Reports",
    "section": "",
    "text": "Credit: event data provided by StatsBomb."
  },
  {
    "objectID": "notebooks/matchReport.html#match-info",
    "href": "notebooks/matchReport.html#match-info",
    "title": "Building Soccer Match Reports",
    "section": "Match Info",
    "text": "Match Info\nThe Final of the Women’s World Cup 2023 took place on 2023-08-20 at 13:00. In the match, Spain was competing against England."
  },
  {
    "objectID": "notebooks/matchReport.html#match-result",
    "href": "notebooks/matchReport.html#match-result",
    "title": "Building Soccer Match Reports",
    "section": "Match Result",
    "text": "Match Result\nSpain 1 - 0 England"
  },
  {
    "objectID": "notebooks/matchReport.html#line-ups",
    "href": "notebooks/matchReport.html#line-ups",
    "title": "Building Soccer Match Reports",
    "section": "Line-Ups",
    "text": "Line-Ups\nLine-Ups based on the average position of actions performed by each player.\n\nHome Team\n\n## Home Team Lineup Map\nworld_cup_final_events %&gt;%\n  filter(team_name == home_team_name) %&gt;%\n  group_by(player.name) %&gt;%\n  summarise(\n    position.name = first(position.name),\n    mean_pos_x = mean(location.x, na.rm = T),\n    mean_pos_y = mean(location.y, na.rm = T),\n    n_actions = n()\n  ) %&gt;%\n  mutate(\n    player_name = gsub(\"  \", \" \", player.name),\n    player_name_lbreak = gsub(\" \", \"\\n\", player_name)\n  ) %&gt;%\n  ggplot() +\n  annotate_pitch(dimensions = pitch_statsbomb, fill = \"darkgreen\", colour = \"white\") +\n   geom_label(aes(x=mean_pos_x+3, y=mean_pos_y, label = player_name), hjust = \"center\", size = 3, fill = \"darksalmon\") +\n  geom_point(aes(x=mean_pos_x, y=mean_pos_y, size = n_actions), col = \"black\",  fill = \"red\", shape = 21)  +\n  scale_size_continuous(range = c(2,10)) +\n  coord_flip()\n\n\n\n\n\n\n\n\n\n\nAway Team"
  },
  {
    "objectID": "notebooks/matchReport.html#pass-map-home-team",
    "href": "notebooks/matchReport.html#pass-map-home-team",
    "title": "Building Soccer Match Reports",
    "section": "Pass map home team",
    "text": "Pass map home team\nDensity map of the passing positions per team.\n\nworld_cup_final_events %&gt;%\n  filter(type.name == \"Pass\",\n         team_name == home_team_name) %&gt;%\n  mutate(\n    location_x_rounded = round(location.x),\n    location_y_rounded = round(location.y)\n  ) %&gt;%\n  ggplot(aes(x=location_x_rounded, y=location_y_rounded)) +\n  annotate_pitch(dimensions = pitch_statsbomb, fill = \"darkgreen\", colour = \"white\") +\n  geom_bin_2d(binwidth = c(10,10), drop = FALSE, alpha = .81, col = \"black\") +\n  scale_fill_cividis()"
  },
  {
    "objectID": "notebooks/matchReport.html#pass-map-away-team",
    "href": "notebooks/matchReport.html#pass-map-away-team",
    "title": "Building Soccer Match Reports",
    "section": "Pass map away team",
    "text": "Pass map away team"
  },
  {
    "objectID": "notebooks/matchReport.html#time-evolution",
    "href": "notebooks/matchReport.html#time-evolution",
    "title": "Building Soccer Match Reports",
    "section": "Time evolution",
    "text": "Time evolution\nEvolution of the cumulated number of shots over the match per team. Goals are indicated by vertical lines\n\ngoal_subset &lt;- world_cup_final_events %&gt;%\n  filter((shot.outcome.name == \"Goal\") | (type.name == \"Own Goal For\"))\n\nworld_cup_final_events %&gt;%\n  group_by(team_name) %&gt;%\n  mutate(\n    cum_shots = cumsum(type.name == \"Shot\")\n  ) %&gt;%\n  ggplot() +\n  geom_line(aes(x=minute, y=cum_shots, col = team_name)) +\n  geom_vline(data = goal_subset, aes(xintercept = minute, color = team_name)) +\n  geom_label(data = goal_subset, aes(x = minute, y = 10, label = paste(\"Goal For \",team_name)), size = 3, fill = \"lightgrey\") +\n  xlab(\"Playing minute\") +\n  ylab(\"Cumulated number of shots\") +\n  scale_color_cividis(discrete = T) +\n  theme_dark()"
  },
  {
    "objectID": "notebooks/matchReport.html#most-impactful-players",
    "href": "notebooks/matchReport.html#most-impactful-players",
    "title": "Building Soccer Match Reports",
    "section": "Most impactful players",
    "text": "Most impactful players\n\nNumber of actions\n\n\n\nTable 1: Top 5 players per team with respect to number of actions\n\n\n\n\n\nSpain\n\n\nteam_name\nplayer.name\nn_actions\n\n\n\n\nSpain\nOlga Carmona García\n250\n\n\nSpain\nMaría Francesca Caldentey Oliver\n242\n\n\nSpain\nJennifer Hermoso Fuentes\n226\n\n\nSpain\nAitana Bonmati Conca\n190\n\n\nSpain\nOna Batlle Pascual\n190\n\n\n\n\n\n\nEngland\n\n\nteam_name\nplayer.name\nn_actions\n\n\n\n\nEngland\nLucy Bronze\n192\n\n\nEngland\nGeorgia Stanway\n168\n\n\nEngland\nKeira Walsh\n166\n\n\nEngland\nLauren Hemp\n159\n\n\nEngland\nAlex Greenwood\n145\n\n\n\n\n\n\n\n\n\n\nPassing distance\n\n\n\nTable 2: Top 5 players per team with respect to passing distance\n\n\n\n\n\nSpain\n\n\nteam_name\nplayer.name\ntotal_pass_length\n\n\n\n\nSpain\nOlga Carmona García\n1287.1\n\n\nSpain\nIrene Paredes Hernandez\n1268.2\n\n\nSpain\nTeresa Abelleira Dueñas\n1038.6\n\n\nSpain\nOna Batlle Pascual\n920.0\n\n\nSpain\nJennifer Hermoso Fuentes\n912.3\n\n\n\n\n\n\nEngland\n\n\nteam_name\nplayer.name\ntotal_pass_length\n\n\n\n\nEngland\nLucy Bronze\n1258.8\n\n\nEngland\nMary Alexandra Earps\n1173.4\n\n\nEngland\nJessica Carter\n1102.8\n\n\nEngland\nAlex Greenwood\n1054.1\n\n\nEngland\nKeira Walsh\n912.1\n\n\n\n\n\n\n\n\n\n\nCarry distance\n\n\n\nTable 3: Top 5 players per team with respect to carry distance\n\n\n\n\n\nSpain\n\n\nteam_name\nplayer.name\ntotal_carry_dist\n\n\n\n\nSpain\nAitana Bonmati Conca\n436.4\n\n\nSpain\nOna Batlle Pascual\n298.1\n\n\nSpain\nOlga Carmona García\n289.4\n\n\nSpain\nJennifer Hermoso Fuentes\n271.9\n\n\nSpain\nIrene Paredes Hernandez\n242.3\n\n\n\n\n\n\nEngland\n\n\nteam_name\nplayer.name\ntotal_carry_dist\n\n\n\n\nEngland\nLauren Hemp\n234.2\n\n\nEngland\nLucy Bronze\n233.2\n\n\nEngland\nAlex Greenwood\n173.6\n\n\nEngland\nLauren James\n170.2\n\n\nEngland\nJessica Carter\n168.6"
  },
  {
    "objectID": "notebooks/matchReport.html#turnovers",
    "href": "notebooks/matchReport.html#turnovers",
    "title": "Building Soccer Match Reports",
    "section": "Turnovers",
    "text": "Turnovers\nA map showing the distribution of turnover locations for both teams.\n\nworld_cup_final_events %&gt;%\n  arrange(minute, second) %&gt;%\n  group_by(possession) %&gt;%\n  summarise(\n    team = first(team_name),\n    duration = sum(duration, na.rm = T),\n    first_action = first(type.name),\n    last_action = last(type.name),\n    last_x = last(location.x),\n    last_y = last(location.y)\n  ) %&gt;%\n  ggplot(aes(x=last_x, y=last_y)) +\n    annotate_pitch(dimensions = pitch_statsbomb, fill = \"darkgreen\", colour = \"white\") +\n    \n  geom_density_2d_filled(alpha = .9) +\n  geom_point(aes(), size = 2, alpha=.6) +\n    facet_grid(team~.) +\n  scale_fill_cividis(discrete = T) +\n       theme(strip.text.y = element_text(size = 20))"
  }
]